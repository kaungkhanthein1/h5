{"version":3,"file":"static/js/761.4119cfbb.chunk.js","mappings":"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","sources":["assets/rate.svg","assets/share/user.svg","components/home/LazyLoadImage.jsx","pages/player/video/VideoPlayer.tsx","pages/player/video/EpisodeModal.tsx","pages/player/video/SourceSelector.tsx","assets/nodata.svg","assets/option.svg","pages/player/video/Popup.tsx","assets/icon_check_nor.svg","assets/icon_check_select.svg","pages/player/video/ReportPopup.tsx","pages/player/video/CommentSection.tsx","pages/player/video/DetailSection.tsx","pages/player/video/EpisodeSelector.tsx","pages/player/video/MovieCard.jsx","pages/player/video/RecommendedList.tsx","pages/player/video/NetworkError.tsx","pages/player/video/PlayerLoading.tsx","pages/player/index.tsx","pages/player/video/Feedback.tsx"],"sourcesContent":["var _g, _defs;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgRate(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Frame\",\n    clipPath: \"url(#clip0_46_3663)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Vector\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 15.3335C6.9981 15.3334 6.01934 15.0323 5.19061 14.4693C4.36187 13.9062 3.7214 13.1072 3.35223 12.1758C2.98306 11.2444 2.90222 10.2236 3.12019 9.24567C3.33816 8.26777 3.84489 7.37791 4.57467 6.69145C5.46934 5.84945 7.66667 4.33346 7.33333 1.00012C11.3333 3.66679 13.3333 6.33346 9.33334 10.3335C10 10.3335 11 10.3335 12.6667 8.68679C12.8467 9.20212 13 9.75612 13 10.3335C13 11.6595 12.4732 12.9313 11.5355 13.869C10.5979 14.8067 9.32608 15.3335 8 15.3335Z\",\n    fill: \"black\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 15.3335C6.9981 15.3334 6.01934 15.0323 5.19061 14.4693C4.36187 13.9062 3.7214 13.1072 3.35223 12.1758C2.98306 11.2444 2.90222 10.2236 3.12019 9.24567C3.33816 8.26777 3.84489 7.37791 4.57467 6.69145C5.46934 5.84945 7.66667 4.33346 7.33333 1.00012C11.3333 3.66679 13.3333 6.33346 9.33334 10.3335C10 10.3335 11 10.3335 12.6667 8.68679C12.8467 9.20212 13 9.75612 13 10.3335C13 11.6595 12.4732 12.9313 11.5355 13.869C10.5979 14.8067 9.32608 15.3335 8 15.3335Z\",\n    fill: \"url(#paint0_linear_46_3663)\"\n  })))), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"paint0_linear_46_3663\",\n    x1: 8.00021,\n    y1: 1.00012,\n    x2: 8.00021,\n    y2: 15.3335,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#FFA132\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#FF3232\"\n  })), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip0_46_3663\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 16,\n    height: 16,\n    fill: \"white\"\n  })))));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgRate);\nexport default __webpack_public_path__ + \"static/media/rate.3f594a6cfa6afb4f6e0629b81bb9bc2f.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _defs;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgUser(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 32,\n    height: 41,\n    viewBox: \"0 0 32 41\",\n    fill: \"none\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M32 36.3636C32.0036 37.909 30.9018 39.2381 29.3818 39.5181C24.9655 40.3199 20.4875 40.7254 16.0001 40.7272C11.5165 40.7254 7.04016 40.3235 2.62908 39.5236C1.10184 39.2472 -0.00547199 37.9145 2.03413e-05 36.3636C0.00365645 32.5072 1.5382 28.8107 4.26546 26.0836C6.99273 23.3564 10.6892 21.8219 14.5454 21.8182H17.4545C21.3109 21.8218 25.0074 23.3564 27.7345 26.0836C30.4617 28.8109 31.9963 32.5073 32 36.3636ZM16.0001 20.3637C18.7001 20.3637 21.2909 19.291 23.2002 17.3819C25.1094 15.4729 26.1819 12.8819 26.1819 10.1818C26.1819 7.48176 25.1092 4.89106 23.2002 2.98177C21.2911 1.07249 18.7002 0 16.0001 0C13.3 0 10.7093 1.07273 8.80003 2.98177C6.89075 4.89082 5.81826 7.48176 5.81826 10.1818C5.82189 12.8818 6.89461 15.4689 8.80371 17.3782C10.7128 19.2873 13.3001 20.36 16.0001 20.3637Z\",\n    fill: \"url(#paint0_linear_1224_6761)\"\n  })), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"paint0_linear_1224_6761\",\n    x1: 16,\n    y1: 40.7272,\n    x2: 16,\n    y2: 0,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#444444\",\n    stopOpacity: 0.2\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#AAAAAA\",\n    stopOpacity: 0.36\n  })))));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgUser);\nexport default __webpack_public_path__ + \"static/media/user.861e227a1248852cdce14d7463539c65.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useRef, useState } from \"react\";\nimport cardSkeleton from \"../../assets/blur.png\"; // Placeholder image\nconst LazyLoadImage = ({ src, alt, width, height, className, ...props }) => {\n  const imgRef = useRef(null);\n  const [loaded, setLoaded] = useState(false);\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            if (imgRef.current) {\n              imgRef.current.src = src;\n              imgRef.current.onload = () => {\n                if (imgRef.current && imgRef.current !== null) {\n                  imgRef.current.style.opacity = \"1\";\n                  setLoaded(true);\n                }\n              };\n            }\n            observer.disconnect();\n          }\n        });\n      },\n      {\n        rootMargin: \"100px\",\n        threshold: 0.1,\n      }\n    );\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n    return () => {\n      if (imgRef.current) {\n        observer.unobserve(imgRef.current);\n      }\n    };\n  }, [src]);\n  return (\n    <div className={`image-container2 ${className}`} style={{ width, height }}>\n      <img\n        ref={imgRef}\n        src={cardSkeleton}\n        alt={alt}\n        width={width}\n        height={height}\n        className={`${className} ${\n          loaded ? \"image-loaded\" : \"image-placeholder\"\n        }`}\n        {...props}\n      />\n    </div>\n  );\n};\nexport default LazyLoadImage;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport Artplayer from \"artplayer\";\nimport Hls from \"hls.js\"; // Import Hls.js\nimport floatingScreen from \"../../../assets/floatingScreen.png\";\nimport axios from \"axios\";\nimport { VideoPlayerProps } from \"../../../model/videoModel\";\nimport { useGetRecordQuery } from \"../../profile/services/profileApi\";\nimport { convertToSecurePayload } from \"../../../services/newEncryption\";\n\nconst VideoPlayer: React.FC<VideoPlayerProps> = ({\n  videoUrl,\n  onBack,\n  movieDetail,\n  selectedEpisode,\n  resumeTime,\n  handleVideoError,\n  autoPlayNextEpisode,\n}) => {\n  const playerRef = useRef<any>(null);\n  const videoElementRef = useRef<HTMLDivElement>(null);\n  const [videoRatio, setVideoRatio] = useState(9 / 16); // Default to 16:9 ratio\n  const { refetch } = useGetRecordQuery(); // Fetch favorite movies list from API\n  const [isControlsVisible, setIsControlsVisible] = useState(false);\n  const inactivityTimeout = useRef<number | null>(null);\n  const [reHeight, setReHeight] = useState(false);\n  const [isLandscape, setIsLandscape] = useState(false);\n\n  // Function to check if browser natively supports HLS\n  const hasNativeHLSSupport = () => {\n    return false;\n    const video = document.createElement(\"video\");\n    return (\n      video.canPlayType(\"application/vnd.apple.mpegurl\") !== \"\" ||\n      video.canPlayType(\"application/x-mpegURL\") !== \"\"\n    );\n  };\n\n  // Function to get token from localStorage\n  const getToken = () => {\n    const isLoggedIn = localStorage.getItem(\"authToken\");\n    const parsedLoggedIn = isLoggedIn ? JSON.parse(isLoggedIn) : null;\n    return parsedLoggedIn?.data?.access_token;\n  };\n\n  // Function to report playback progress on specific events (back or episode change)\n  const reportProgress = async (currentTime: number, duration: number) => {\n    const token = getToken();\n    if (!token) return;\n\n    try {\n      await axios.post(\n        `${process.env.REACT_APP_API_URL}/movie_play/report`,\n        convertToSecurePayload({\n          movie_id: movieDetail.id, // Assuming movie_id is movie name\n          episode_id: selectedEpisode?.episode_id,\n          movie_from: selectedEpisode?.from_code,\n          duration: Math.floor(duration), // Report in seconds\n          current_time: Math.floor(currentTime), // Report in seconds\n        }),\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n    } catch (error) {\n      console.error(\"Error reporting playback progress:\", error);\n    }\n  };\n\n  useEffect(() => {\n    let hls: Hls | null = null;\n\n    const initializePlayer = async () => {\n      if (videoElementRef.current && videoUrl) {\n        const art = new Artplayer({\n          container: videoElementRef.current,\n          url: videoUrl,\n          autoplay: true,\n          playbackRate: true,\n          setting: true,\n          autoOrientation: false,\n          // fullscreen: true,\n          airplay: true,\n          controls: [\n            {\n              position: \"right\",\n              html: `<div><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M20 3H22V9H20V5H16V3H20ZM4 3H8V5H4V9H2V3H4ZM20 19V15H22V21H16V19H20ZM4 19H8V21H2V15H4V19Z\" fill=\"white\" fill-opacity=\"0.9\"/>\n</svg><div>`,\n              tooltip: \"Fullscreen\",\n              click: function (...args) {\n                // playerRef.current.fullscreen = true;\n                if (\n                  (window as any).webkit &&\n                  (window as any).webkit.messageHandlers &&\n                  (window as any).webkit.messageHandlers.jsBridge\n                ) {\n                  (window as any).webkit.messageHandlers.jsBridge.postMessage({\n                    eventName: \"fullscreen\",\n                  });\n                } else {\n                  playerRef.current.fullscreen = true;\n                }\n              },\n            },\n          ],\n          // miniProgressBar: true,\n          // moreVideoAttr: {\n          //   playsInline: true,\n          // },\n        });\n\n        // Handle HLS streams: prioritize native support, fallback to HLS.js\n        if (videoUrl.includes(\".m3u8\")) {\n          if (hasNativeHLSSupport()) {\n            // Use native HLS support (Safari, iOS, etc.)\n            art.video.src = videoUrl;\n            console.log(\"Using native HLS support\");\n\n            // Add error handling for native HLS\n            art.video.addEventListener(\"error\", (e) => {\n              console.error(\"Native HLS error:\", e);\n              handleVideoError(videoUrl);\n            });\n\n            // Add timeout for loading\n            // const loadTimeout = setTimeout(() => {\n            //   if (art.video.readyState === 0) {\n            //     console.error(\"Video loading timeout\");\n            //     // handleVideoError(videoUrl);\n            //   }\n            // }, 10000); // 10 second timeout\n\n            // // Clear timeout when video starts loading\n            // art.video.addEventListener(\"loadstart\", () => {\n            //   clearTimeout(loadTimeout);\n            // });\n          } else if (Hls.isSupported()) {\n            // Fallback to HLS.js for browsers without native support\n            hls = new Hls();\n            hls.loadSource(videoUrl);\n            hls.attachMedia(art.video);\n\n            // Handle HLS errors\n            hls.on(Hls.Events.ERROR, (_, data) => {\n              console.error(\"HLS.js error:\", data);\n              if (data.fatal) {\n                handleVideoError(videoUrl);\n              } else if (data.type === Hls.ErrorTypes.NETWORK_ERROR) {\n                console.error(\"Network error, attempting recovery\");\n                if (hls) {\n                  hls.startLoad();\n                }\n              }\n            });\n\n            // // Add timeout for HLS loading\n            // const hlsTimeout = setTimeout(() => {\n            //   if (art.video.readyState === 0) {\n            //     console.error(\"HLS loading timeout\");\n            //     handleVideoError(videoUrl);\n            //   }\n            // }, 10000); // 10 second timeout\n\n            // // Clear timeout when manifest is loaded\n            // hls.on(Hls.Events.MANIFEST_LOADED, () => {\n            //   clearTimeout(hlsTimeout);\n            // });\n\n            console.log(\"Using HLS.js library\");\n          } else {\n            // Neither native nor HLS.js support available\n            art.video.src = videoUrl;\n            console.log(\"No HLS support detected, trying direct URL\");\n\n            // Add error handling for fallback\n            art.video.addEventListener(\"error\", (e) => {\n              console.error(\"Video error (no HLS support):\", e);\n              handleVideoError(videoUrl);\n            });\n          }\n        } else {\n          // Non-HLS video\n          art.video.src = videoUrl;\n\n          // Add error handling for regular videos\n          art.video.addEventListener(\"error\", (e) => {\n            console.error(\"Video error:\", e);\n            handleVideoError(videoUrl);\n          });\n        }\n\n        // Adjust video ratio based on the video's actual dimensions\n        art.once(\"video:loadedmetadata\", () => {\n          const videoWidth = art.video.videoWidth;\n          const videoHeight = art.video.videoHeight;\n          if (videoWidth > videoHeight) {\n            sendNativeEvent(\"landscape_view\");\n            setIsLandscape(true);\n          } else if (videoHeight > videoWidth) {\n            sendNativeEvent(\"potrait_view\");\n            setIsLandscape(false);\n          } else {\n            sendNativeEvent(\"square_view\");\n            setIsLandscape(false);\n          }\n          setVideoRatio(videoHeight / videoWidth); // Set the dynamic aspect ratio\n          setReHeight(videoWidth < videoHeight);\n        });\n        art.on(\"error\", (error, reconnectTime) => {\n          console.error(\"ArtPlayer error:\", error);\n          handleVideoError(videoUrl);\n        });\n        const controls: any = document.querySelector(\".art-controls-right\");\n        if (controls) {\n          controls.style.display = \"flex\"; // Ensure display is flex\n          controls.style.flexDirection = \"row-reverse\"; // Dynamically set direction\n        }\n        // Set resume time if available\n        art.once(\"ready\", () => {\n          if (resumeTime > 0) {\n            art.currentTime = resumeTime;\n          }\n          setTimeout(() => {\n            if (playerRef.current) {\n              const token = getToken();\n              if (token) {\n                reportProgress(\n                  playerRef.current.currentTime,\n                  playerRef.current.duration\n                );\n              }\n            }\n          }, 1000);\n          setTimeout(() => {\n            if (playerRef.current) {\n              const token = getToken();\n              if (token) {\n                refetch();\n              }\n            }\n          }, 3000);\n        });\n        art.on(\"control\", (state) => {\n          setIsControlsVisible(state);\n        });\n        art.on(\"video:ended\", () => {\n          autoPlayNextEpisode();\n        });\n        playerRef.current = art;\n      }\n    };\n\n    initializePlayer();\n\n    // Orientation change listener\n    const handleOrientationChange = () => {\n      if (playerRef && playerRef.current) {\n        playerRef.current.fullscreen =\n          window.innerWidth > window.innerHeight ? true : false;\n      }\n    };\n\n    // Add the event listener for orientation change\n    window.addEventListener(\"orientationchange\", handleOrientationChange);\n    return () => {\n      // Clean up HLS and ArtPlayer\n      if (hls) {\n        hls.destroy(); // Stop HLS requests\n        hls = null;\n      }\n      if (playerRef.current) {\n        playerRef.current.pause();\n        playerRef.current.video.src = \"\"; // Clear video source\n        playerRef.current.destroy(); // Destroy ArtPlayer\n        playerRef.current = null;\n      }\n    };\n  }, [videoUrl, resumeTime]);\n\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.hidden && playerRef.current) {\n        playerRef.current.pause();\n      }\n    };\n\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n    return () => {\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, []);\n\n  // Define the event handler\n  const sendNativeEvent = (message: string) => {\n    if (\n      (window as any).webkit &&\n      (window as any).webkit.messageHandlers &&\n      (window as any).webkit.messageHandlers.jsBridge\n    ) {\n      (window as any).webkit.messageHandlers.jsBridge.postMessage(message);\n    }\n  };\n\n  const handleBack = async () => {\n    onBack();\n  };\n\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      if (playerRef.current) {\n        const token = getToken();\n        if (token) {\n          reportProgress(\n            playerRef.current.currentTime,\n            playerRef.current.duration\n          );\n          refetch();\n        }\n      }\n    }, 15000); // 15 seconds interval\n\n    return () => clearInterval(interval); // Cleanup interval on unmount\n  }, []);\n\n  const handlePiP = () => {\n    if (document.pictureInPictureEnabled && playerRef.current) {\n      if (playerRef.current.video !== document.pictureInPictureElement) {\n        playerRef.current.video.requestPictureInPicture();\n      } else {\n        document.exitPictureInPicture();\n      }\n    }\n  };\n\n  // useEffect(() => {\n  //   const handleScroll = () => {\n  //     const playerElement = videoElementRef.current;\n  //     if (!playerElement) return;\n\n  //     const rect = playerElement.getBoundingClientRect();\n  //     console.log('rect top is=>', rect);\n  //     // const isOutOfView = rect.top < 0;\n\n  //     // Minimize player when scrolled out of view\n  //     // setIsMinimized(isOutOfView);\n  //   };\n\n  //   window.addEventListener(\"scroll\", handleScroll);\n  //   return () => {\n  //     window.removeEventListener(\"scroll\", handleScroll);\n  //   };\n  // }, []);\n\n  return (\n    <div\n      id=\"my-player\"\n      className={`relative w-full bg-black ${\n        reHeight ? \"h-[220px]\" : \"h-[220px]\"\n      }`}\n    >\n      {/* Back button */}\n      {isControlsVisible && (\n        <>\n          <div className=\"absolute top-0 left-0 p-4 z-50\">\n            <button onClick={handleBack} className=\"text-white flex\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\"\n                height=\"24\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n              >\n                <path\n                  d=\"M7.828 11H20V13H7.828L13.192 18.364L11.778 19.778L4 12L11.778 4.22198L13.192 5.63598L7.828 11Z\"\n                  fill=\"white\"\n                />\n              </svg>\n              <p className=\"cus-elips\">{selectedEpisode?.episode_name}</p>\n            </button>\n          </div>\n          <div className=\"absolute top-0 right-0 p-4 z-50\">\n            <button className=\"text-white\" onClick={handlePiP}>\n              <img src={floatingScreen} alt=\"PiP\" className=\"h-5 w-5\" />\n            </button>\n          </div>\n        </>\n      )}\n\n      {/* Video element wrapper */}\n      <div\n        className={`relative w-full ${reHeight ? \"h-[220px]\" : \"h-[220px]\"}`}\n        style={\n          isLandscape\n            ? { height: \"220px\" }\n            : { paddingTop: `${videoRatio * 100}%` }\n        }\n      >\n        {/* Video element */}\n        <div\n          ref={videoElementRef}\n          className={`absolute w-full ${\n            reHeight\n              ? \"h-[220px]\"\n              : isLandscape\n              ? \"h-[220px] flex items-center justify-center\"\n              : \"h-[220px]\"\n          }`}\n          style={\n            isLandscape\n              ? { top: \"50%\", left: \"50%\", transform: \"translate(-50%, -50%)\" }\n              : { top: 0, left: 0 }\n          }\n        ></div>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoPlayer;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { Episode, ModalComponentProps } from '../../../model/videoModel';\n\nconst ModalComponent: React.FC<ModalComponentProps> = ({\n  onClose,\n  source,\n  episodes,\n  onEpisodeSelect,\n  changeSource,\n  playFrom,\n  defaultEpisodeId,\n  selectedSource,\n  setSelectedSource,\n}) => {\n  const [activeTab, setActiveTab] = useState<\"episodes\" | \"sources\">(\n    source || \"episodes\"\n  );\n  const [selectedEpisodeId, setSelectedEpisodeId] = useState<number | null>(\n    defaultEpisodeId\n  );\n  const [episodeRange, setEpisodeRange] = useState<[number, number]>([0, 50]);\n  const [filteredEpisodes, setFilteredEpisodes] = useState<Episode[]>([]);\n  const [lowerDivHeight, setLowerDivHeight] = useState(0);\n\n  // Refs for auto-scrolling\n  const episodeContainerRef = useRef<HTMLDivElement>(null);\n  const sourceContainerRef = useRef<HTMLDivElement>(null);\n  const selectedEpisodeRef = useRef<HTMLButtonElement>(null);\n  const selectedSourceRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    // Combine all episodes from the playFrom list\n    // const allEpisodes = playFrom.flatMap((source) => source.list);\n    setFilteredEpisodes(episodes);\n    }, [episodes]);\n\n  // Handle episode selection and update the state\n  const handleEpisodeClick = (episode: Episode) => {\n    setSelectedEpisodeId(episode.episode_id);\n    onEpisodeSelect(episode);\n  };\n\n  // Auto-update episode range to include selected episode\n  useEffect(() => {\n    if (selectedEpisodeId && filteredEpisodes.length > 0) {\n      const selectedIndex = filteredEpisodes.findIndex(ep => ep.episode_id === selectedEpisodeId);\n      if (selectedIndex !== -1) {\n        const rangeStart = Math.floor(selectedIndex / 50) * 50;\n        const rangeEnd = Math.min(rangeStart + 50, filteredEpisodes.length);\n        if (episodeRange[0] !== rangeStart || episodeRange[1] !== rangeEnd) {\n          setEpisodeRange([rangeStart, rangeEnd]);\n        }\n      }\n    }\n  }, [selectedEpisodeId, filteredEpisodes]);\n\n  // Handle tab switch\n  const handleTabClick = (start: number, end: number) => {\n    setEpisodeRange([start, end]);\n  };\n\n  // Sync default episode selection when the component mounts or when defaultEpisodeId changes\n  useEffect(() => {\n    setSelectedEpisodeId(defaultEpisodeId);\n  }, [defaultEpisodeId]);\n\n  // Auto-scroll to selected episode\n  useEffect(() => {\n    if (selectedEpisodeRef.current && activeTab === \"episodes\") {\n      // Use setTimeout to ensure the DOM has updated\n      setTimeout(() => {\n        selectedEpisodeRef.current?.scrollIntoView({\n          behavior: \"auto\", // No transition effect\n          block: \"center\",\n          inline: \"center\"\n        });\n      }, 0);\n    }\n  }, [selectedEpisodeId, activeTab, episodeRange]);\n\n  // Auto-scroll to selected source\n  useEffect(() => {\n    if (selectedSourceRef.current && activeTab === \"sources\") {\n    console.log('event ....', selectedSourceRef)\n      selectedSourceRef.current.scrollIntoView({\n        behavior: \"auto\", // No,  transition effect\n        block: \"nearest\", // Use \"nearest\" to avoid unnecessary scrolling\n        inline: \"center\"\n      });\n    }\n  }, [selectedSource, activeTab]);\n\n  const customHeight = () => {\n    const upperDiv = document.getElementById('upper-div');\n    const upperDivHeight = upperDiv?.offsetHeight || 0;\n    const remainingHeight = window.innerHeight - upperDivHeight;\n    return remainingHeight;\n  };\n\n  useEffect(() => {\n    const updateHeight = () => {\n      setLowerDivHeight(customHeight());\n    };\n\n    updateHeight(); // Set initial height\n    window.addEventListener('resize', updateHeight); // Update height on window resize\n\n    return () => {\n      window.removeEventListener('resize', updateHeight); // Cleanup event listener\n    };\n  }, []);\n\n  const modalRef = useRef<any>(null);\n  useEffect(() => {\n    const handleClickOutside = (event: any) => {\n      if (modalRef.current && !modalRef.current.contains(event.target)) {\n        onClose();\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [modalRef]);\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-end justify-center\">\n      <div className=\"bg-sourceBack backdrop-blur-md w-full max-w-md rounded-t-xl p-4 text-white\" ref={modalRef}\n        style={{ height: `${lowerDivHeight}px` }}>\n        <div className=\"flex justify-between items-center mb-4\">\n          <div className=\"flex space-x-6 overflow-x-auto m-auto\">\n            {/* Episode Tab */}\n            <button\n              className={`pb-2 text-gray-400`}\n              onClick={() => setActiveTab(\"episodes\")}\n            >\n              选集\n              {activeTab === \"episodes\" && <div className=\"absolute w-[32px] h-1 bg-mainColor rounded-md mt-1\"></div>}\n            </button>\n            {/* Source Tab */}\n            <button\n              className={`pb-2 text-gray-400`}\n              onClick={() => setActiveTab(\"sources\")}\n            >\n              播放源\n              {activeTab === \"sources\" && <div className=\"absolute w-[32px] h-1 bg-mainColor rounded-md mt-1 ml-2\"></div>}\n            </button>\n          </div>\n          <button onClick={onClose} className=\"text-white\">\n            <FontAwesomeIcon icon={faTimes} className=\"text-lg\" />\n          </button>\n        </div>\n\n        <div className=\"h-[calc(100%-60px)] overflow-y-auto\">\n          {activeTab === \"episodes\" && (\n            <div>\n              <div className=\"flex space-x-4 overflow-x-auto mb-4\">\n                {/* Episode Range Tabs */}\n                {Array.from({ length: Math.ceil(filteredEpisodes.length / 50) }, (_, index) => {\n                  const start = index * 50;\n                  const end = Math.min(start + 50, filteredEpisodes.length);\n                  return (\n                    <>\n                    <button\n                      key={index}\n                      className={`px-4 whitespace-nowrap py-2 text-sm`}\n                      onClick={() => handleTabClick(start, end)}\n                    >\n                      <div className=\"mb-2\">{start + 1}-{end}集</div>\n                      {episodeRange[0] === start && <div className=\"w-full h-1 bg-mainColor rounded-md\"></div>}\n                    </button>\n                    </>\n                  );\n                })}\n              </div>\n              <div className=\"grid grid-cols-2 gap-2\" ref={episodeContainerRef}>\n                {filteredEpisodes\n                  .slice(episodeRange[0], episodeRange[1])\n                  .map((episode) => (\n                    <button\n                      key={episode.episode_id}\n                      ref={episode.episode_id === selectedEpisodeId ? selectedEpisodeRef : null}\n                      onClick={() => {handleEpisodeClick(episode);}}\n                      className={`py-2 text-center rounded-lg ${\n                        episode.episode_id !== selectedEpisodeId\n                          ? \"bg-source text-white\"\n                          : \"bg-episodeSelected  text-white\"\n                      }`}\n                    > \n                      {episode.episode_name.length > 7 ? `${episode.episode_name.substring(0, 100)}...` : episode.episode_name}\n                      {episode?.episode_id === selectedEpisodeId && (\n                        <span className=\"transform -translate-x-1/2 loader ml-5 -mt-1.5\">\n                          <div></div>\n                          <div></div>\n                          <div></div>\n                        </span>\n                      )}\n                    </button>\n                  ))}\n              </div>\n            </div>\n          )}\n\n          {activeTab === \"sources\" && (\n            <div ref={sourceContainerRef}>\n              {playFrom &&\n                playFrom.map((source, index) => (\n                  <div\n                    key={index}\n                    ref={index === selectedSource ? selectedSourceRef : null}\n                    className={`flex justify-between items-center p-3 rounded-lg mb-2 cursor-pointer \n                      ${index === selectedSource ? 'bg-episodeSelected' : 'bg-source'}`}\n                    onClick={() => {\n                      setSelectedSource(index);\n                      changeSource(source);\n                    }}\n                  >\n                    <div>\n                      <h4 className=\"text-white\">{source.name}</h4>\n                      {/* Display total videos if available */}\n                      <div className=\"flex justify-between items-center\">\n                      {source.total && (\n                        <p className=\"bg-source text-white text-[12px] px-3 py-1.5 my-2 mr-3 rounded-md\">{source.total} 个视频</p>\n                      )}\n                      {/* Display tips if available */}\n                      <p className=\"bg-source text-white text-[12px] px-3 py-1.5 my-2 rounded-md\">\n                        {source.tips || \"No description available\"}\n                      </p>\n                      </div>\n                    </div>\n                    {index === selectedSource && (\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <circle cx=\"12\" cy=\"12\" r=\"9\" fill=\"#F54100\"/>\n                      <path d=\"M10.5 13.6032L16.0152 8.0874L16.8642 8.9358L10.5 15.3L6.68158 11.4816L7.52998 10.6332L10.5 13.6032Z\" fill=\"white\"/>\n                      </svg>\n                    )}\n                  </div>\n                ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ModalComponent;","import React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronRight } from \"@fortawesome/free-solid-svg-icons\";\nimport ModalComponent from \"./EpisodeModal\";\nimport { Episode, MovieDetail } from '../../../model/videoModel';\n\n\ninterface SourceSelectorProps {\n  episodes: Episode[]; // Episodes list\n  // onEpisodeChange: (episode: Episode) => void; // Callback to change the current episode\n  onEpisodeSelect: (episode: Episode) => void;\n  changeSource: (playfrom: any) => void;\n  selectedEpisode: Episode | null;\n  movieDetail: MovieDetail;\n  selectedSource: number;\n  setSelectedSource: (source: number) => void; \n  setIsModalOpen: (open: boolean) => void;\n  isModalOpen: boolean;\n}\n\nconst SourceSelector: React.FC<SourceSelectorProps> = ({\n  episodes,\n  // onEpisodeChange,\n  onEpisodeSelect,\n  selectedEpisode,\n  changeSource,\n  movieDetail,\n  selectedSource,\n  setSelectedSource,\n  setIsModalOpen,\n  isModalOpen\n}) => {\n  const [source, setSource] = useState<\"episodes\" | \"sources\">(\"episodes\"); // Modal state\n\n  // Open the modal\n  const openModal = () => setIsModalOpen(true);\n\n  // Close the modal\n  const closeModal = () => setIsModalOpen(false);\n  return (\n    <div className=\"bg-background p-4 mb-4\">\n      {/* Section header with title and expand all */}\n      <div className=\"flex justify-between items-center mb-2\">\n        <h4 className=\"text-white text-[18px] font-bold\">选集</h4>\n\n        {/* Expand All (展开全部) button triggers the modal */}\n        <div className=\"flex items-center text-gray-400 text-sm\">\n          <button\n            onClick={() => {\n              openModal();\n              setSource(\"episodes\");\n            }}\n            className=\"flex items-center\"\n          >\n            <span className=\" text-[16px]\">展开全部</span>\n            <FontAwesomeIcon icon={faChevronRight} className=\"ml-1 text-[12px]\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Source Selector Area */}\n      {/* Source Selector Area */}\n      {movieDetail && movieDetail.play_from && <div className=\"p-4 flex justify-between items-center rounded-lg shadow-sm mt-5\" style={{background: \"linear-gradient(100deg, #FEE4B3 0%, #FFD993 100%)\"}}>\n        <div className=\"text-channel leading-tight\">\n          {/* Display current playFrom source and number of videos */}\n          <span className=\"text-sm\">\n            <span className=\"font-bold\">\n              {movieDetail.play_from[selectedSource]?.name || \"未选择来源\"}\n            </span>{\" \"}\n            <span className=\"text-channelSecondary\">{movieDetail?.play_from[selectedSource]?.total || 0} 个视频</span>\n          </span>\n        </div>\n\n        {/* Right Side: Switch resource (切换资源) button triggers the modal */}\n        <button\n          className=\"text-channel flex items-center\"\n          onClick={() => {\n            openModal();\n            setSource(\"sources\");\n          }}\n        >          \n          {/* <FontAwesomeIcon icon={faArrowsRotate} className=\"mr-2 text-lg\" /> */}\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 20 20\"\n            fill=\"none\"\n          >\n            <path\n              d=\"M4.55252 3.69401C6.06465 2.38373 7.99918 1.66372 10 1.66651C14.6025 1.66651 18.3334 5.39735 18.3334 9.99984C18.3334 11.7798 17.775 13.4298 16.825 14.7832L14.1667 9.99984H16.6667C16.6668 8.69286 16.2827 7.41468 15.5622 6.32422C14.8418 5.23377 13.8166 4.37914 12.6143 3.86662C11.412 3.35409 10.0856 3.20626 8.79998 3.44153C7.51435 3.67679 6.32623 4.28476 5.38335 5.18985L4.55252 3.69401ZM15.4475 16.3057C13.9354 17.616 12.0009 18.336 10 18.3332C5.39752 18.3332 1.66669 14.6023 1.66669 9.99984C1.66669 8.21984 2.22502 6.56984 3.17502 5.21651L5.83335 9.99984H3.33335C3.33325 11.3068 3.71731 12.585 4.4378 13.6755C5.15829 14.7659 6.18341 15.6205 7.3857 16.1331C8.588 16.6456 9.91442 16.7934 11.2001 16.5582C12.4857 16.3229 13.6738 15.7149 14.6167 14.8098L15.4475 16.3057Z\"\n              fill=\"#522B0F\"\n              fill-opacity=\"0.6\"\n            />\n          </svg>\n          <span className=\"font-semibold text-sm ml-1\">切换资源</span>\n        </button>\n      </div>}\n\n      {/* Modal */}\n      {isModalOpen && (\n        <ModalComponent\n          changeSource={changeSource}\n          onClose={closeModal}\n          source={source}\n          episodes={episodes}\n          onEpisodeSelect={onEpisodeSelect}\n          selectedSource={selectedSource}\n          setSelectedSource={setSelectedSource}\n          defaultEpisodeId={selectedEpisode?.episode_id || null} // Pass current episode ID as default\n          playFrom={movieDetail.play_from} // You can add real sources here if needed\n        />\n      )}\n    </div>\n  );\n};\n\nexport default SourceSelector;\n","var _path, _path2, _line, _path3, _path4;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgNodata(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 88,\n    height: 114,\n    viewBox: \"0 0 88 114\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M25.3594 23.7031H63.3281C63.8876 23.7031 64.4241 23.9254 64.8197 24.3209C65.2153 24.7165 65.4375 25.2531 65.4375 25.8125V59.5625C65.4375 60.1219 65.2153 60.6585 64.8197 61.0541C64.4241 61.4496 63.8876 61.6719 63.3281 61.6719H25.3594C24.7999 61.6719 24.2634 61.4496 23.8678 61.0541C23.4722 60.6585 23.25 60.1219 23.25 59.5625V25.8125C23.25 25.2531 23.4722 24.7165 23.8678 24.3209C24.2634 23.9254 24.7999 23.7031 25.3594 23.7031ZM61.2188 46.9062H54.0131C53.1924 48.7881 51.8403 50.3896 50.1228 51.5143C48.4052 52.639 46.3968 53.2381 44.3438 53.2381C42.2907 53.2381 40.2823 52.639 38.5647 51.5143C36.8472 50.3896 35.4951 48.7881 34.6744 46.9062H27.4688V57.4531H61.2188V46.9062ZM61.2188 42.6875V27.9219H27.4688V42.6875H38.0156C38.0156 44.3658 38.6823 45.9754 39.8691 47.1622C41.0558 48.3489 42.6654 49.0156 44.3438 49.0156C46.0221 49.0156 47.6317 48.3489 48.8184 47.1622C50.0052 45.9754 50.6719 44.3658 50.6719 42.6875H61.2188Z\",\n    fill: \"white\",\n    fillOpacity: 0.4\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M55.1252 9.89232L56.6442 16.5088\",\n    stroke: \"#F54100\",\n    strokeWidth: 4.6875,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _line || (_line = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 72.1884,\n    y1: 11.2488,\n    x2: 68.8145,\n    y2: 16.3335,\n    stroke: \"#F54100\",\n    strokeWidth: 4.6875,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M79.9689 26.7501L74.0668 28.0344\",\n    stroke: \"#F54100\",\n    strokeWidth: 4.6875,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.04078 100.082C7.86345 99.466 7.67211 98.8967 7.46678 98.374L8.36278 98.234C8.47478 98.5047 8.57278 98.7893 8.65678 99.088C8.75012 99.3867 8.83878 99.718 8.92278 100.082H12.0868V100.922H10.9808C10.6261 102.303 10.1174 103.489 9.45478 104.478C9.94011 104.898 10.3974 105.318 10.8268 105.738C11.2654 106.149 11.6854 106.564 12.0868 106.984L11.4008 107.67C11.0368 107.259 10.6541 106.853 10.2528 106.452C9.85145 106.041 9.41278 105.621 8.93678 105.192C7.96612 106.349 6.72945 107.194 5.22678 107.726L4.70878 106.928C6.16478 106.461 7.35478 105.687 8.27878 104.604C7.84011 104.231 7.38745 103.857 6.92078 103.484C6.45411 103.101 5.96411 102.719 5.45078 102.336L6.05278 101.734C6.54745 102.098 7.02345 102.462 7.48078 102.826C7.94745 103.181 8.38611 103.535 8.79678 103.89C9.08611 103.47 9.33811 103.017 9.55278 102.532C9.76745 102.037 9.94945 101.501 10.0988 100.922H4.98878V100.082H8.04078ZM2.11878 98.43C2.53878 98.7567 2.92611 99.0787 3.28078 99.396C3.63545 99.704 3.95745 100.021 4.24678 100.348L3.60278 100.964C3.35078 100.656 3.04745 100.343 2.69278 100.026C2.34745 99.6993 1.95545 99.368 1.51678 99.032L2.11878 98.43ZM9.34278 109.42C9.01612 109.42 8.67078 109.415 8.30678 109.406C7.94278 109.397 7.56012 109.387 7.15878 109.378C6.76678 109.369 6.41211 109.345 6.09478 109.308C5.77745 109.28 5.49278 109.229 5.24078 109.154C4.78345 109.014 4.34945 108.711 3.93878 108.244C3.78011 108.039 3.62145 107.936 3.46278 107.936C3.16411 107.936 2.67878 108.505 2.00678 109.644L1.33478 109.056C2.00678 107.992 2.59011 107.357 3.08478 107.152V103.372H1.30678V102.56H3.91078V107.194C3.96678 107.231 4.01811 107.273 4.06478 107.32C4.11145 107.367 4.16278 107.418 4.21878 107.474C4.48945 107.829 4.80678 108.09 5.17078 108.258C5.53478 108.426 6.08078 108.529 6.80878 108.566C7.14478 108.575 7.51345 108.58 7.91478 108.58C8.31611 108.58 8.75478 108.58 9.23078 108.58C9.52011 108.58 9.80945 108.58 10.0988 108.58C10.3881 108.58 10.6914 108.575 11.0088 108.566C11.6154 108.557 12.0821 108.538 12.4088 108.51L12.1988 109.42H9.34278ZM15.6808 102.014V103.68H18.7188V102.014H15.6808ZM18.7188 104.492H14.8128V98.71H23.5068V104.492H19.6288V105.934H24.1228V106.802H19.6288V108.342H24.6268V109.182H13.7068V108.342H18.7188V106.802H14.2248V105.934H18.7188V104.492ZM19.6288 103.68H22.6248V102.014H19.6288V103.68ZM22.6248 101.202V99.522H19.6288V101.202H22.6248ZM18.7188 99.522H15.6808V101.202H18.7188V99.522ZM27.5629 102.574C27.3389 102.882 27.1009 103.185 26.8489 103.484C26.5969 103.783 26.3309 104.077 26.0509 104.366L25.7569 103.442C27.1289 101.902 28.1136 100.157 28.7109 98.206L29.5369 98.598C29.3969 99.0553 29.2336 99.494 29.0469 99.914C28.8602 100.334 28.6549 100.74 28.4309 101.132V109.644H27.5629V102.574ZM33.6949 98.248V102.336H37.2229V103.232H33.6949V109.63H32.7849V103.232H29.4249V102.336H32.7849V98.248H33.6949ZM46.627 104.198C47.1403 104.973 47.6163 105.766 48.055 106.578C48.503 107.39 48.9183 108.23 49.301 109.098L48.405 109.476C48.3303 109.261 48.2416 109.056 48.139 108.86C48.0456 108.655 47.957 108.449 47.873 108.244C46.781 108.449 45.577 108.622 44.261 108.762C42.9543 108.893 41.5263 109.009 39.977 109.112L39.711 108.188C39.8416 108.141 39.9723 108.071 40.103 107.978C40.2336 107.885 40.3643 107.768 40.495 107.628C42.1003 105.976 43.8176 103.577 45.647 100.432L46.543 100.88C45.451 102.663 44.471 104.156 43.603 105.36C42.7443 106.555 41.993 107.474 41.349 108.118C43.4863 107.969 45.5256 107.745 47.467 107.446C47.187 106.895 46.9116 106.377 46.641 105.892C46.3703 105.397 46.081 104.926 45.773 104.478L46.627 104.198ZM44.093 98.402C42.805 101.09 41.097 103.311 38.969 105.066L38.353 104.324C40.313 102.765 41.909 100.726 43.141 98.206L44.093 98.402ZM61.715 98.808V99.48C61.519 100.124 61.3137 100.745 61.099 101.342C60.8844 101.939 60.665 102.518 60.441 103.078C60.8984 103.713 61.2437 104.282 61.477 104.786C61.7104 105.281 61.827 105.724 61.827 106.116C61.827 106.807 61.6684 107.283 61.351 107.544C60.9964 107.833 60.3197 107.978 59.321 107.978L59.055 107.068C59.223 107.096 59.3724 107.115 59.503 107.124C59.6337 107.133 59.7597 107.138 59.881 107.138C60.357 107.101 60.651 107.026 60.763 106.914C60.8937 106.755 60.959 106.489 60.959 106.116C60.959 105.341 60.4784 104.329 59.517 103.078C59.7224 102.602 59.9277 102.079 60.133 101.51C60.3384 100.931 60.5484 100.311 60.763 99.648H58.565V109.616H57.697V98.808H61.715ZM53.371 99.704V98.262H54.225V99.704H55.555V100.488H54.225V102.07H54.645C55.4197 101.146 56.0357 100.101 56.493 98.934L57.249 99.284C57.053 99.8067 56.8337 100.301 56.591 100.768C56.3484 101.235 56.0684 101.669 55.751 102.07H57.109V102.896H55.051C54.8364 103.12 54.6217 103.33 54.407 103.526C54.2017 103.722 53.987 103.918 53.763 104.114H56.507V109.616H55.667V109.084H53.035V109.63H52.153V105.15C51.9944 105.234 51.8264 105.323 51.649 105.416C51.4717 105.5 51.299 105.584 51.131 105.668L50.655 104.954C51.8777 104.431 52.951 103.745 53.875 102.896H51.005V102.07H53.371V100.488H51.579V99.704H53.371ZM53.035 108.286H55.667V106.984H53.035V108.286ZM55.667 104.884H53.035V106.214H55.667V104.884ZM64.1611 98.416C65.0104 99.032 65.7338 99.6573 66.3311 100.292L65.7011 100.922C65.4398 100.623 65.1271 100.32 64.7631 100.012C64.3991 99.6947 63.9931 99.3727 63.5451 99.046L64.1611 98.416ZM63.7971 101.412C64.6184 102.019 65.3091 102.635 65.8691 103.26L65.2251 103.876C64.7304 103.307 64.0491 102.691 63.1811 102.028L63.7971 101.412ZM66.1631 105.108C65.5844 106.657 64.9544 108.109 64.2731 109.462L63.3771 109.084C64.1518 107.675 64.8051 106.242 65.3371 104.786L66.1631 105.108ZM66.9191 104.492V103.652H73.4711V104.464C72.9671 105.649 72.1878 106.653 71.1331 107.474C72.0851 108.109 73.2471 108.585 74.6191 108.902L74.1851 109.7C72.6731 109.308 71.4178 108.748 70.4191 108.02C69.3831 108.692 68.1558 109.243 66.7371 109.672L66.2891 108.846C66.9611 108.669 67.5771 108.463 68.1371 108.23C68.6971 107.997 69.2151 107.74 69.6911 107.46C68.7764 106.639 68.1138 105.649 67.7031 104.492H66.9191ZM70.4191 106.97C71.3431 106.27 72.0244 105.444 72.4631 104.492H68.5571C68.9958 105.463 69.6164 106.289 70.4191 106.97ZM72.4631 98.724V101.44C72.4631 101.72 72.6171 101.86 72.9251 101.86H74.3391V102.7H72.7151C71.9684 102.7 71.5951 102.341 71.5951 101.622V99.592H68.9771V100.152C68.9771 101.477 68.3144 102.504 66.9891 103.232L66.4011 102.546C67.5211 102.005 68.0811 101.239 68.0811 100.25V98.724H72.4631ZM79.3752 104.058H84.3032V102.714H79.3752V104.058ZM79.3752 104.842V106.172H84.3032V104.842H79.3752ZM79.3752 106.942V109.602H78.5492V103.12C77.8305 103.997 77.0278 104.795 76.1412 105.514L75.5532 104.758C77.1212 103.507 78.3298 102.084 79.1792 100.488H75.8752V99.634H79.5712C79.6925 99.382 79.7952 99.1393 79.8792 98.906C79.9725 98.6633 80.0612 98.4207 80.1452 98.178L81.0552 98.276C80.9712 98.5187 80.8918 98.752 80.8172 98.976C80.7425 99.2 80.6632 99.4193 80.5792 99.634H86.7392V100.488H80.1872C80.0752 100.74 79.9538 100.987 79.8232 101.23C79.6925 101.463 79.5478 101.697 79.3892 101.93H85.1572V108.636C85.1572 109.243 84.8118 109.555 84.1212 109.574H82.7212L82.5112 108.762C82.9592 108.79 83.3978 108.804 83.8272 108.804C84.1445 108.804 84.3032 108.655 84.3032 108.356V106.942H79.3752Z\",\n    fill: \"white\",\n    fillOpacity: 0.6\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgNodata);\nexport default __webpack_public_path__ + \"static/media/nodata.602e9d175c26118b96c5275571f916b6.svg\";\nexport { ForwardRef as ReactComponent };","var _rect, _path, _path2, _path3;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgOption(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 26,\n    height: 17,\n    viewBox: \"0 0 26 17\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    y: 0.5,\n    width: 26,\n    height: 16,\n    rx: 2,\n    fill: \"white\",\n    fillOpacity: 0.1\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 10C7.82843 10 8.5 9.32843 8.5 8.5C8.5 7.67157 7.82843 7 7 7C6.17157 7 5.5 7.67157 5.5 8.5C5.5 9.32843 6.17157 10 7 10Z\",\n    fill: \"white\",\n    fillOpacity: 0.6\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.5 8.5C14.5 9.32843 13.8284 10 13 10C12.1716 10 11.5 9.32843 11.5 8.5C11.5 7.67157 12.1716 7 13 7C13.8284 7 14.5 7.67157 14.5 8.5Z\",\n    fill: \"white\",\n    fillOpacity: 0.6\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20.5 8.5C20.5 9.32843 19.8284 10 19 10C18.1716 10 17.5 9.32843 17.5 8.5C17.5 7.67157 18.1716 7 19 7C19.8284 7 20.5 7.67157 20.5 8.5Z\",\n    fill: \"white\",\n    fillOpacity: 0.6\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgOption);\nexport default __webpack_public_path__ + \"static/media/option.5b29b1676789ad2f515659f19e460c71.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { showToast } from \"../../profile/error/ErrorSlice\";\n\nconst Popup: React.FC<{setOpenPopup: (open: boolean) => void; setOpenReportPopup: (open: boolean) => void; currentSelected: any}> = ({setOpenPopup, setOpenReportPopup, currentSelected}) => {\n  const dispatch = useDispatch();\n\n  const copyToClipboard = () => {\n    // Create a textarea element to hold the text\n    const textArea = document.createElement(\"textarea\");\n    textArea.value = currentSelected?.content;\n\n    // Position off-screen and make it invisible\n    textArea.style.position = \"fixed\";\n    textArea.style.top = \"-1000px\";\n    textArea.style.opacity = \"0\";\n\n    document.body.appendChild(textArea);\n    textArea.select();\n\n    try {\n      document.execCommand(\"copy\"); // This works on most browsers, including iOS Safari\n      dispatch(showToast({ message: \"复制的\", type: \"success\" }));\n    } catch (err) {\n      console.error(\"Failed to copy to clipboard\", err);\n    }\n\n    // Remove the textarea after copying\n    document.body.removeChild(textArea);\n  };\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center z-50\">\n      <div className=\"bg-[#303033] popup-custom\">\n        <button className=\"block popup-item\" onClick={copyToClipboard}>复制</button>\n        <button className=\"block popup-item\" onClick={(e)=>setOpenReportPopup(true)}>举报</button>\n        <button className=\"block cancel-btn\" onClick={(e)=>setOpenPopup(false)}>取消</button>\n      </div>\n    </div>\n  );\n}\n\nexport default Popup;\n","var _g;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgIconCheckNor(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"icon_check_nor\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Ellipse 38\",\n    cx: 12,\n    cy: 12,\n    r: 9,\n    stroke: \"white\",\n    strokeOpacity: 0.2,\n    strokeWidth: 2\n  }))));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgIconCheckNor);\nexport default __webpack_public_path__ + \"static/media/icon_check_nor.e59c9459695fdeebbcce8d05f438fb93.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgIconCheckSelect(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"icon_check_select\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"\\xE5\\xBD\\xA2\\xE7\\x8A\\xB6\",\n    d: \"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2Z\",\n    fill: \"#F54100\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"\\xE5\\xBD\\xA2\\xE7\\x8A\\xB6_2\",\n    d: \"M10.5857 13.331L15.5355 8.38128C15.926 7.99075 16.5592 7.99075 16.9497 8.38128C17.3402 8.7718 17.3402 9.40497 16.9497 9.79549L11.3636 15.3816C10.934 15.8112 10.2375 15.8112 9.80793 15.3816L7.05021 12.6239C6.65969 12.2334 6.65969 11.6002 7.05021 11.2097C7.44074 10.8192 8.0739 10.8192 8.46442 11.2097L10.5857 13.331Z\",\n    fill: \"white\"\n  }))));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgIconCheckSelect);\nexport default __webpack_public_path__ + \"static/media/icon_check_select.953875e76e6376dee503c7dbb22a9ea4.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from \"react\";\nimport DefaultIcon from \"../../../assets/icon_check_nor.svg\";\nimport SelectedIcon from \"../../../assets/icon_check_select.svg\";\nimport { showToast } from \"../../profile/error/ErrorSlice\";\nimport { useDispatch } from \"react-redux\";\n\nconst ReportPopup: React.FC<{\n  setOpenPopup: (open: boolean) => void;\n  setOpenReportPopup: (open: boolean) => void;\n}> = ({ setOpenPopup, setOpenReportPopup }) => {\n  const dispatch = useDispatch();\n\n  const [reportCause, setReportCause] = useState<any>(null);\n\n  const reportItems = [\n    { key: 1, value: \"违反法律法规\" },\n    { key: 2, value: \"侵犯个人利益\" },\n    { key: 3, value: \"仇恨言论\" },\n    { key: 4, value: \"有害社区环境\" },\n  ];\n\n  const reportSubmit = () => {\n    setOpenPopup(false);\n    setOpenReportPopup(false);\n    dispatch(showToast({ message: \"成功\", type: \"success\" }));\n  };\n\n  return (\n    <div className=\"fixed inset-0 flex items-center justify-center z-50\">\n      <div className=\"bg-[#303033] popup-custom p-5\">\n        {reportItems.map((item) => {\n          return (\n            <div key={item.key} onClick={() => setReportCause(item)}>\n              <div className=\"mb-4 w-full flex justify-between\">\n                <label htmlFor=\"option1\" className=\"text-white text-[14px]\">\n                  {item.value}\n                </label>\n                {/* <input type=\"radio\" id=\"option1\" name=\"option\" className=\"mr-2\" /> */}\n                <img\n                  src={\n                    reportCause?.key === item.key ? SelectedIcon : DefaultIcon\n                  }\n                  alt=\"\"\n                  className=\"h-5 rounded-sm\"\n                />\n              </div>\n            </div>\n          );\n        })}\n        <button\n          className=\"bg-[#F54100] text-white py-2 px-4 rounded w-full\"\n          onClick={reportSubmit}\n        >\n          提交\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ReportPopup;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faThumbsUp,\n  faPaperPlane,\n  faSpinner,\n  faTrash,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport ProfileImg from \"../../../assets/share/user.svg\";\nimport NoData from \"../../../assets/nodata.svg\";\nimport OptionIcon from \"../../../assets/option.svg\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setAuthModel } from \"../../../features/login/ModelSlice\";\nimport { CommentProps, Comment, Reply } from \"../../../model/commentModel\";\nimport { showToast } from \"../../../pages/profile/error/ErrorSlice\";\nimport Popup from \"./Popup\";\nimport ReportPopup from \"./ReportPopup\";\nimport Loader from \"../../../pages/search/components/Loader\";\nimport { useGetUserQuery } from \"../../../pages/profile/services/profileApi\";\nimport {\n  convertToSecurePayload,\n  convertToSecureUrl,\n  decryptWithAes,\n} from \"../../../services/newEncryption\";\nimport { fetchCommentData } from \"../../../services/playerService\";\n\nconst CommentComponent: React.FC<CommentProps> = ({\n  movieId,\n  lowerDivHeight,\n  setCommentCount,\n  commentCount,\n  comments,\n  setComments,\n  hasMore,\n  setHasMore,\n}) => {\n  const [newComment, setNewComment] = useState(\"\");\n  const [replyingTo, setReplyingTo] = useState<number | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const commentInputRef = useRef<HTMLInputElement>(null);\n  const [isLoggedIn, setIsLoggedLogIn] = useState<boolean>(false);\n  const [openPopup, setOpenPopup] = useState(false);\n  const [openReportPopup, setOpenReportPopup] = useState(false);\n  const [currentSelected, setCurrentSelected] = useState<any>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  // const user = useSelector((state: any) => state.user.user);\n  const { data: userData } = useGetUserQuery(undefined);\n  const [showDeleteConfirmation, setShowDeleteConfirmation] = useState(false);\n  const [deleteParams, setDeleteParams] = useState<any>(null);\n  const [numberOfRow, setNumberOfRow] = useState<number>(1);\n  const user = userData?.data;\n  console.log(\"user is=>\", user);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const fetchLoginInfo = async () => {\n      const loginResponse = await localStorage.getItem(\"authToken\");\n      const loginInfo = loginResponse ? JSON.parse(loginResponse) : null;\n\n      setIsLoggedLogIn(\n        loginInfo && loginInfo.data && loginInfo.data.access_token\n          ? true\n          : false\n      );\n    };\n    fetchLoginInfo();\n  }, []);\n\n  useEffect(() => {\n    // window.scrollTo(0, 0);\n  }, []);\n  // Fetch comments\n  const fetchComments = async () => {\n    setIsLoading(true);\n    try {\n      const response: any = await fetchCommentData(movieId || \"\", page);\n      const data: any = response ? await decryptWithAes(response) : null;\n\n      console.log(\"data is=>\", data);\n      // Concatenate new comments to existing ones using spread operator (...)\n      const updatedComments =\n        comments &&\n        comments.length > 0 &&\n        comments.length < data.data.total &&\n        page > 1\n          ? [...comments, ...data.data.list]\n          : data.data.list;\n      setComments(updatedComments);\n      setCommentCount(data.data.total);\n      // Update hasMore based on total comments and fetched list length\n      setHasMore(data.data.total > updatedComments.length);\n    } catch (error) {\n      console.error(\"Error fetching comments:\", error);\n      setIsLoading(false);\n      setHasMore(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchComments();\n  }, [page]);\n\n  // Like a comment\n  const likeComment = async (commentId: number) => {\n    if (!isLoggedIn) {\n      dispatch(setAuthModel(true));\n      return;\n    }\n    const loginResponse = await localStorage.getItem(\"authToken\");\n    const loginInfo = loginResponse ? JSON.parse(loginResponse || \"\") : null;\n    const authorization =\n      loginInfo && loginInfo.data && loginInfo.data.access_token\n        ? `${loginInfo.data.token_type} ${loginInfo.data.access_token}`\n        : null;\n\n    if (authorization) {\n      try {\n        const response = await fetch(\n          `${process.env.REACT_APP_API_URL}/movie/comments/like`,\n          {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: authorization,\n            },\n            body: JSON.stringify(\n              convertToSecurePayload({ comment_id: commentId })\n            ),\n          }\n        );\n        if (response.ok) {\n          setComments((prevComments: any) =>\n            prevComments.map((comment: any) =>\n              comment.id === commentId\n                ? { ...comment, likes: comment.likes + 1 }\n                : comment\n            )\n          );\n        } else {\n          console.error(\"Error liking comment\");\n        }\n      } catch (error) {\n        console.error(\"Error liking comment:\", error);\n      }\n    }\n  };\n\n  // Load replies\n  const loadReplies = async (comment: Comment) => {\n    setIsLoading(true);\n    try {\n      const response: any = await fetch(\n        `${process.env.REACT_APP_API_URL}/movie/comments/replies?comment_id=${\n          comment.id\n        }&last_reply_id=${\n          comment.replies.list[comment.replies.list.length - 1].id\n        }&limit=10`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      const data: any = response ? await decryptWithAes(response) : null;\n      const newComments = comments.map((c: any) => {\n        if (c.id === comment.id) {\n          c.replies.list = [...c.replies.list, ...data.data.list];\n          c.replies.hasMore = data.data.hasMore;\n        }\n        return c;\n      });\n      setComments(newComments);\n    } catch (error) {\n      console.error(\"Error loading replies:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Delete comment or reply with authentication\n  const deleteCommentOrReply = async (id: number, isReply: boolean) => {\n    const loginResponse = await localStorage.getItem(\"authToken\");\n    const loginInfo = loginResponse ? JSON.parse(loginResponse || \"\") : null;\n    const authorization =\n      loginInfo && loginInfo.data && loginInfo.data.access_token\n        ? `${loginInfo.data.token_type} ${loginInfo.data.access_token}`\n        : null;\n\n    if (authorization) {\n      try {\n        const response = await fetch(\n          `${process.env.REACT_APP_API_URL}/movie/comments/delete`,\n          {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: authorization,\n            },\n            body: JSON.stringify(\n              convertToSecurePayload({ is_reply: isReply, id })\n            ),\n          }\n        );\n        if (response.ok) {\n          setComments((prevComments: any) =>\n            prevComments.filter((comment: any) => comment.id !== id)\n          );\n          dispatch(showToast({ message: \"已删除\", type: \"success\" }));\n        }\n      } catch (error) {\n        console.error(\"Error deleting comment/reply:\", error);\n      }\n    }\n  };\n\n  const handleDelete = (id: number, isReply: boolean) => {\n    setDeleteParams({ id, isReply });\n    setShowDeleteConfirmation(true); // Open confirmation modal\n  };\n\n  const handleConfirm = () => {\n    if (deleteParams) {\n      deleteCommentOrReply(deleteParams.id, deleteParams.isReply);\n    }\n    setShowDeleteConfirmation(false);\n  };\n\n  const handleCancel = () => {\n    setShowDeleteConfirmation(false);\n  };\n  // Post a new comment or reply\n  const handleCreateCommentOrReply = async () => {\n    if (!newComment) return;\n    setLoading(true);\n\n    const loginResponse = await localStorage.getItem(\"authToken\");\n    const loginInfo = loginResponse ? JSON.parse(loginResponse || \"\") : null;\n    const authorization =\n      loginInfo && loginInfo.data && loginInfo.data.access_token\n        ? `${loginInfo.data.token_type} ${loginInfo.data.access_token}`\n        : null;\n\n    if (authorization) {\n      try {\n        const response = await fetch(\n          `${process.env.REACT_APP_API_URL}/movie/comments/create`,\n          {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: authorization,\n            },\n            body: JSON.stringify(\n              convertToSecurePayload({\n                comment_id: replyingTo ? replyingTo : 0,\n                movie_id: movieId,\n                type: \"text\",\n                content: newComment,\n              })\n            ),\n          }\n        );\n\n        await response.json();\n        if (page === 1) {\n          fetchComments();\n        } else {\n          setPage(1);\n        }\n\n        setNewComment(\"\");\n        setReplyingTo(null);\n        dispatch(showToast({ message: \"已发布\", type: \"success\" }));\n      } catch (error) {\n        console.error(\"Error creating comment or reply:\", error);\n        dispatch(showToast({ message: \"创建评论或回复时出错\", type: \"error\" }));\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (replyingTo !== null && commentInputRef.current) {\n      commentInputRef.current.focus();\n    }\n  }, [replyingTo]);\n\n  const handleLoad = () => {\n    setPage((prev) => prev + 1);\n  };\n\n  return (\n    <div>\n      <div style={{ height: lowerDivHeight - 140, overflow: \"scroll\" }}>\n        {comments && comments.length > 0 ? (\n          <InfiniteScroll\n            dataLength={comments.length}\n            next={handleLoad}\n            hasMore={hasMore}\n            loader={\n              <div className=\"text-white flex justify-center pb-4 items-center text-center\">\n                <Loader />\n              </div>\n            }\n            className=\"comment-section flex flex-col rounded-md p-3\"\n            height={lowerDivHeight - 140}\n          >\n            {comments.map((comment: any) => (\n              <div key={comment.id} className=\"comment pb-4 relative\">\n                {/* Like button at the top right corner */}\n                {comment.status !== 0 && (\n                  <button\n                    disabled={!isLoggedIn}\n                    onClick={() => likeComment(comment.id)}\n                    className=\"absolute top-0 right-0 m-2 text-gray-400 hover:text-blue-500\"\n                  >\n                    <FontAwesomeIcon icon={faThumbsUp} />\n                    <p className=\"-mt-1\">{comment.likes}</p>\n                  </button>\n                )}\n                <div className=\"profile flex items-center justify-items-center mb-2\">\n                  <img\n                    src={comment.user?.avatar || ProfileImg}\n                    alt={comment.user?.nickname}\n                    className=\"w-8 h-8 rounded-full mr-2 mt-3\"\n                  />\n                  <span className=\"username text-commentIcon font-bold\">\n                    {comment.user?.nickname}\n                  </span>\n                  <img\n                    src={comment.user?.level}\n                    alt={comment.user?.level}\n                    className=\"h-6 w-auto ml-2\"\n                  />\n                </div>\n                <div style={{ marginLeft: \"46px\", marginTop: \"-8px\" }}>\n                  <div\n                    className={`comment-text text-gray-300 mb-1 ${\n                      comment.status === 0 ? \"italic\" : \"\"\n                    }`}\n                  >\n                    {comment.content}\n                  </div>\n                  <div className=\"comment-actions flex items-center justify-start gap-4 mt-2\">\n                    <span className=\"time text-gray-500 text-sm\">\n                      {\n                        new Date(comment.create_time * 1000)\n                          ?.toISOString()\n                          ?.split(\"T\")[0]\n                      }\n                    </span>\n                    <div>\n                      {comment.status !== 0 && (\n                        <span\n                          className=\"time text-commentIcon text-sm mr-4\"\n                          onClick={() => setReplyingTo(comment.id)}\n                        >\n                          回复\n                        </span>\n                      )}\n                      {user && user.id && comment.user_id === user.id && (\n                        <span\n                          className=\"time text-commentIcon text-sm\"\n                          onClick={() => handleDelete(comment.id, false)}\n                        >\n                          删除\n                        </span>\n                      )}\n                    </div>\n                    {comment.status !== 0 && (\n                      <img\n                        src={OptionIcon}\n                        onClick={() => {\n                          setOpenPopup(true);\n                          setCurrentSelected(comment);\n                        }}\n                        alt=\"\"\n                        className=\"w-9 h-5 rounded-sm mr-2 mt-0.5\"\n                      />\n                    )}\n                  </div>\n                </div>\n                {/* Replies */}\n                {comment.replies &&\n                  comment.replies?.list &&\n                  comment.replies?.list.length > 0 && (\n                    <>\n                      <div className=\"reply-section mt-2 pl-10\">\n                        {comment.replies.list.map((reply: Reply) => (\n                          <div key={reply.id} className=\"reply\">\n                            <div className=\"profile flex items-center justify-items-center mb-2\">\n                              <img\n                                src={reply.user?.avatar || ProfileImg}\n                                alt={reply.user?.nickname}\n                                className=\"w-8 h-8 rounded-full mr-2 mt-3\"\n                              />\n                              <span className=\"username text-commentIcon font-bold\">\n                                {reply.user?.nickname}\n                              </span>\n                              <img\n                                src={reply.user?.level}\n                                alt={reply.user?.level}\n                                className=\"h-6 w-auto ml-2\"\n                              />\n                            </div>\n                            <div\n                              style={{ marginLeft: \"46px\", marginTop: \"-8px\" }}\n                            >\n                              <div\n                                className={`comment-text text-gray-300 mb-1 ${\n                                  comment.status === 0 ? \"italic\" : \"\"\n                                }`}\n                              >\n                                {reply.content}\n                              </div>\n                              <div className=\"comment-actions flex items-center justify-start gap-4 mt-2\">\n                                <span className=\"time text-gray-500 text-sm\">\n                                  {\n                                    new Date(reply.create_time * 1000)\n                                      ?.toISOString()\n                                      ?.split(\"T\")[0]\n                                  }\n                                </span>\n                                <div>\n                                  {reply.status !== 0 && (\n                                    <span\n                                      className=\"time text-commentIcon text-sm mr-4\"\n                                      onClick={() => setReplyingTo(comment.id)}\n                                    >\n                                      回复\n                                    </span>\n                                  )}\n                                  {user &&\n                                    user.id &&\n                                    reply.user.id === user.id && (\n                                      <span\n                                        className=\"time text-commentIcon text-sm\"\n                                        onClick={() =>\n                                          handleDelete(reply.id, true)\n                                        }\n                                      >\n                                        删除\n                                      </span>\n                                    )}\n                                </div>\n                                {comment.status !== 0 && (\n                                  <img\n                                    src={OptionIcon}\n                                    onClick={() => {\n                                      setOpenPopup(true);\n                                      setCurrentSelected(comment);\n                                    }}\n                                    alt=\"\"\n                                    className=\"w-9 h-5 rounded-sm mr-2 mt-0.5\"\n                                  />\n                                )}\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                      {comment.replies?.hasMore &&\n                        (!isLoading ? (\n                          <div\n                            onClick={() => loadReplies(comment)}\n                            className=\"flex self-stretch justify-start items-center flex-row gap-2\"\n                            style={{ marginLeft: 46, marginTop: 15 }}\n                          >\n                            <div\n                              className=\"bg-[rgba(255,255,255,0.1)] w-[28px] h-px\"\n                              style={{ width: \"28px\" }}\n                            ></div>\n                            <div className=\"flex justify-start items-center flex-row gap-1\">\n                              <span className=\"text-[rgba(255,255,255,0.6)] text-sm font-['PingFang_SC']\">\n                                展开 条回复\n                              </span>\n                              <div\n                                className=\"flex justify-center items-center flex-row pt-[2.999999523162842px] pb-[3px] pr-[3px] pl-[2.999999523162842px] w-[18px] h-[18px]\"\n                                style={{ width: \"18px\" }}\n                              >\n                                <svg\n                                  width=\"12\"\n                                  height=\"12\"\n                                  viewBox=\"0 0 12 12\"\n                                  fill=\"none\"\n                                  xmlns=\"http://www.w3.org/2000/svg\"\n                                >\n                                  <path\n                                    d=\"M5.79381 8.16363L2.29151 4.05146C2.26667 4.02225 2.25243 3.98831 2.25028 3.95326C2.24814 3.91821 2.25818 3.88336 2.27934 3.85243C2.3005 3.82149 2.33198 3.79563 2.37044 3.77759C2.40889 3.75955 2.45287 3.75002 2.4977 3.75L9.5023 3.75C9.54713 3.75002 9.59111 3.75955 9.62956 3.77759C9.66802 3.79563 9.6995 3.82149 9.72066 3.85243C9.74182 3.88336 9.75186 3.91821 9.74972 3.95326C9.74757 3.98831 9.73333 4.02225 9.70849 4.05146L6.20619 8.16363C6.18356 8.1902 6.1529 8.21198 6.11693 8.22705C6.08096 8.24212 6.0408 8.25 6 8.25C5.9592 8.25 5.91904 8.24212 5.88307 8.22705C5.8471 8.21198 5.81644 8.1902 5.79381 8.16363Z\"\n                                    fill=\"white\"\n                                    fillOpacity=\"0.6\"\n                                  />\n                                </svg>\n                              </div>\n                            </div>\n                          </div>\n                        ) : (\n                          <div className=\"text-white flex w-[300px] justify-center mt-4 pb-4 items-center text-center\">\n                            <Loader />\n                          </div>\n                        ))}\n                    </>\n                  )}\n              </div>\n            ))}\n          </InfiniteScroll>\n        ) : isLoading ? (\n          <div className=\"text-white flex justify-center pb-4 items-center text-center mt-52\">\n            <Loader />\n          </div>\n        ) : (\n          <div\n            className=\"flex justify-center items-center text-center comment-btn\"\n            style={{ height: lowerDivHeight, width: \"100%\" }}\n          >\n            <img src={NoData} alt=\"nodata\" width={120} />\n          </div>\n        )}\n      </div>\n      {/* Create new comment or reply */}\n      {isLoggedIn ? (\n        <div className=\"create-comment bg-commentInput p-2 flex items-center justify-center rounded-lg w-full  comment-btn\">\n          <img\n            src={user?.avatar || ProfileImg}\n            alt=\"User Avatar\"\n            className={`w-8 h-8 rounded-full mr-1`}\n          />\n          <textarea\n            value={newComment}\n            onChange={(e) => setNewComment(e.target.value)}\n            onKeyDown={(e) => {\n              console.log(\"e.key is=>\", e.key);\n              if (e.key === \"Enter\" && !e.shiftKey) {\n                e.preventDefault(); // Prevent default submit behavior\n                setNewComment((prev) => prev + \"\\n\"); // Add a new line\n                setNumberOfRow((prev) => prev + 1); // Increment rows\n              } else if (e.key === \"Backspace\") {\n                // Calculate the number of newlines in the comment\n                const newNumberOfRows =\n                  (newComment.match(/\\n/g) || []).length + 1;\n\n                // Update the number of rows dynamically\n                setNumberOfRow(newNumberOfRows > 1 ? newNumberOfRows : 1);\n              }\n            }}\n            className=\"flex-grow bg-source text-white border-0 outline-none p-2 rounded-md focus:outline-none focus:ring-0\"\n            placeholder={\"确认过眼神，你是发言人！\"}\n            rows={numberOfRow} // Dynamically adjust the rows\n          />\n\n          {newComment && (\n            <button\n              onClick={handleCreateCommentOrReply}\n              className=\"bg-playerNavigator text-white py-2 px-4 ml-3 rounded-md focus:outline-none\"\n              disabled={loading}\n            >\n              {loading ? (\n                <FontAwesomeIcon icon={faSpinner} />\n              ) : (\n                <span>发送</span>\n              )}\n            </button>\n          )}\n        </div>\n      ) : (\n        <div className=\"create-comment mt-6 flex items-center justify-center rounded-lg w-full comment-btn\">\n          <button\n            onClick={() => dispatch(setAuthModel(true))}\n            className=\"text-white w-full px-4 py-3 mx-2 rounded-md\"\n            style={{ background: \"#f54000\" }}\n          >\n            登录后发布评论\n          </button>\n        </div>\n      )}\n\n      {/* Popup */}\n      {openPopup && (\n        <Popup\n          setOpenPopup={setOpenPopup}\n          setOpenReportPopup={setOpenReportPopup}\n          currentSelected={currentSelected}\n        />\n      )}\n      {openReportPopup && (\n        <ReportPopup\n          setOpenPopup={setOpenPopup}\n          setOpenReportPopup={setOpenReportPopup}\n        />\n      )}\n      {showDeleteConfirmation && (\n        <div className=\"fixed inset-0 z-20 bg-black bg-opacity-80 flex justify-center items-center mt-20\">\n          <div className=\"bg-[#242428] confirm w-full rounded-2xl mx-10 text-center shadow-lg\">\n            <h2 className=\"p-5\">您确定要删除吗?</h2>\n            <div className=\"flex justify-between\">\n              <button\n                className=\"text-white w-[50%] p-3 border-t-[1px] border-r-[1px] border-gray-500\"\n                onClick={handleCancel}\n              >\n                取消\n              </button>\n              <button\n                className=\"text-[#f54100] w-[50%] p-3 border-t-[1px] border-gray-500\"\n                onClick={handleConfirm}\n              >\n                删除全部\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CommentComponent;\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport share from \"../../../assets/share.png\";\nimport star from \"../../../assets/star.png\";\nimport info from \"../../../assets/info.png\";\nimport shareLink from \"../../../assets/shareLink.png\";\nimport selectedStar from \"../../../assets/selectedStar.png\";\nimport rate from \"../../../assets/rate.svg\";\nimport icon from \"../../../assets/logo.svg\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faChevronRight,\n  faTimes,\n  faFire,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport Cookies from \"js-cookie\";\nimport CommentComponent from \"./CommentSection\";\nimport { useDispatch } from \"react-redux\";\nimport { setAuthModel } from \"../../../features/login/ModelSlice\";\nimport FeedbackComponent from \"./Feedback\";\nimport AdsSection from \"./AdsSection\";\nimport { DetailSectionProps } from \"../../../model/videoModel\";\nimport { useGetListQuery } from \"../../../pages/profile/services/profileApi\";\nimport NewAds from \"../../../components/NewAds\";\nimport Fire from \"../../../assets/Fire.png\";\nimport copy from \"copy-to-clipboard\";\nimport {\n  convertToSecurePayload,\n  convertToSecureUrl,\n  decryptWithAes,\n} from \"../../../services/newEncryption\";\nimport axios from \"axios\";\nimport episode from \"../../../assets/episode.png\";\n\nconst DetailSection: React.FC<DetailSectionProps> = ({\n  movieDetail,\n  adsData,\n  id,\n  activeTab,\n  setActiveTab,\n  setCommentCount,\n  commentCount,\n  setIsModalOpen,\n}) => {\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [hasMore, setHasMore] = useState(false);\n  const [showModal, setShowModal] = useState(false); // For triggering modal\n  const dispatch = useDispatch();\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [isStarred, setIsStarred] = useState<boolean>(\n    movieDetail && movieDetail.is_collect ? true : false\n  );\n  const { refetch } = useGetListQuery({ page: 1, type_id: 0 });\n  const [showFeedbackModal, setShowFeedbackModal] = useState(false); // For triggering modal\n  const [visible, setVisible] = useState(false);\n\n  // const [lowerDivHeight, setLowerDivHeight] = useState(0);\n  // const modalRef = useRef<any>(null);\n\n  const handleCopy = () => {\n    setVisible(true);\n    setTimeout(() => setVisible(false), 2000); // Hide after 2 seconds\n  };\n\n  // const handleDetailClick = () => {\n  //   setShowModal(true);\n  // };\n\n  const handleCloseModal = () => {\n    setShowModal(false);\n  };\n\n  const handleFeedbackModel = () => {\n    setShowFeedbackModal(!showFeedbackModal);\n  };\n  const handleTabClick = async (tab: string) => {\n    const loginResponse = await localStorage.getItem(\"authToken\");\n    const loginInfo = loginResponse ? JSON.parse(loginResponse || \"\") : null;\n\n    if (loginInfo && loginInfo.data && loginInfo.data.access_token) {\n      const authorization = `${loginInfo.data.token_type} ${loginInfo.data.access_token}`;\n      if (tab === \"star\") {\n        handleStarToggle(authorization);\n      } else {\n        handleFeedbackModel();\n      }\n    } else {\n      dispatch(setAuthModel(true));\n    }\n  };\n\n  const handleStarToggle = async (authorization: string) => {\n    setIsLoading(true);\n    try {\n      // Toggle collection API call\n      const response = await fetch(\n        `${process.env.REACT_APP_API_URL}/movie/collect/action`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: authorization,\n          },\n          body: JSON.stringify(\n            convertToSecurePayload({\n              movie_id: id,\n              state: isStarred ? 0 : 1,\n            })\n          ),\n        }\n      );\n      if (response.ok) {\n        refetch();\n        setIsStarred(!isStarred);\n      } else {\n        alert(\"收藏操作失败，请稍后重试\");\n      }\n    } catch (error) {\n      console.error(\"Error toggling star:\", error);\n      alert(\"收藏操作失败，请稍后重试\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const copyToClipboard = async (text: string) => {\n    try {\n      if (isWebView()) {\n        sendEventToNative(text);\n      }\n      handleCopy();\n      copy(text);\n    } catch (error) {\n      console.error(\"Clipboard copy failed\", error);\n    }\n  };\n\n  const sendEventToNative = (text: string) => {\n    if (\n      (window as any).webkit &&\n      (window as any).webkit.messageHandlers &&\n      (window as any).webkit.messageHandlers.jsBridge\n    ) {\n      (window as any).webkit.messageHandlers.jsBridge.postMessage({\n        eventName: \"movieDetailShare\",\n        value: text,\n      });\n    }\n  };\n\n  function isWebView() {\n    return (\n      (window as any).webkit &&\n      (window as any).webkit.messageHandlers &&\n      (window as any).webkit.messageHandlers.jsBridge\n    );\n  }\n\n  const handleShare = async () => {\n    setIsLoading(true);\n    const cookieKey = \"shareContent\";\n\n    try {\n      // Check if the cookie exists\n      const cachedContent = Cookies.get(cookieKey);\n      if (cachedContent) {\n        copyToClipboard(JSON.parse(cachedContent).data.content);\n        sendShareEventToNative(JSON.parse(cachedContent).data.content);\n        return;\n      }\n\n      // Call the API if no cached content is found\n      const response = await axios.get(\n        convertToSecureUrl(`${process.env.REACT_APP_API_URL}/user/get_share`),\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n\n      const data = await response.data;\n      const result: any = await decryptWithAes(data);\n\n      if (data && result) {\n        // Save to cookie with a 2-hour expiry\n        Cookies.set(cookieKey, JSON.stringify(result), { expires: 1 / 12 }); // 1/12 day = 2 hours\n        sendShareEventToNative(result?.data.content);\n        copyToClipboard(result?.data.content);\n      }\n    } catch (error) {\n      console.error(\"Error fetching share content:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const sendShareEventToNative = (value: any) => {\n    if (\n      (window as any).webkit &&\n      (window as any).webkit.messageHandlers &&\n      (window as any).webkit.messageHandlers.jsBridge\n    ) {\n      (window as any).webkit.messageHandlers.jsBridge.postMessage({\n        eventName: \"socialMediaShare\",\n        value: value,\n      });\n    }\n  };\n\n  const customHeight = () => {\n    const upperDiv = document.getElementById(\"upper-div\");\n    const upperDivHeight = upperDiv?.offsetHeight || 0;\n    const remainingHeight = window.innerHeight - upperDivHeight;\n    return remainingHeight;\n  };\n\n  const lowerDivHeightRef = useRef(customHeight());\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  // This won't trigger re-renders\n  const updateHeight = useCallback(() => {\n    const newHeight = customHeight();\n    lowerDivHeightRef.current = newHeight;\n\n    // Directly apply to modal if it's open\n    if (modalRef.current && showModal) {\n      modalRef.current.style.height = `${newHeight}px`;\n    }\n  }, [showModal]);\n\n  useEffect(() => {\n    // Initial height calculation\n    updateHeight();\n\n    // Throttled resize handler\n    let ticking = false;\n    const handleResize = () => {\n      if (!ticking) {\n        window.requestAnimationFrame(() => {\n          updateHeight();\n          ticking = false;\n        });\n        ticking = true;\n      }\n    };\n\n    window.addEventListener(\"resize\", handleResize, { passive: true });\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, [updateHeight]);\n\n  const handleDetailClick = () => {\n    setShowModal(true);\n    // Apply current height directly\n    if (modalRef.current) {\n      modalRef.current.style.height = `${lowerDivHeightRef.current}px`;\n    }\n  };\n\n  // useEffect(() => {\n  //   const updateHeight = () => {\n  //     setLowerDivHeight(customHeight());\n  //   };\n\n  //   updateHeight(); // Set initial height\n  //   window.addEventListener(\"resize\", updateHeight); // Update height on window resize\n\n  //   return () => {\n  //     window.removeEventListener(\"resize\", updateHeight); // Cleanup event listener\n  //   };\n  // }, []);\n\n  // useEffect(() => {\n  //   setTimeout(() => {\n  //     console.log(\"scroll to top\");\n  //     window.scrollTo(0, 0);\n  //   }, 200);\n  // }, []);\n\n  useEffect(() => {\n    const handleClickOutside = (event: any) => {\n      if (modalRef.current && !modalRef.current.contains(event.target)) {\n        setShowModal(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [modalRef]);\n\n  // useEffect(() => {\n  //   if (activeTab === \"tab-1\") {\n  //     setTimeout(() => {\n  //       window.scrollTo(0, 0);\n  //     }, 200);\n  //   }\n  // }, [activeTab]);\n\n  return (\n    <div className=\"flex flex-col w-full bg-background\">\n      {/* Tabs */}\n\n      {/* Tab content */}\n      <div\n        className={`bg-background rounded-b-lg p-1 ${\n          activeTab === \"tab-1\" && \"p-4\"\n        }`}\n      >\n        {activeTab === \"tab-1\" && (\n          <div id=\"tab-1\" className=\"block\">\n            {/* Movie Title and Info */}\n            <div className=\"movie-info mb-4 flex-auto overflow-x-scroll\">\n              {/* text-[16px] remove */}\n              <h2 className=\"text-[18px] font-semibold text-white\">\n                {movieDetail.name || \"暂无标题\"}\n              </h2>\n              <div className=\"info text-white/40 text-sm flex justify-between items-start overflow-x-auto space-x-2 mt-2\">\n                {/* Left Section: Flames, year, area, and tags */}\n                <div className=\"left-section flex items-center flex-wrap space-x-2 w-[80%] overflow-x-auto text-[14px]\">\n                  {/* <span className=\"rating flex items-center\"> */}\n                  <span className=\"flames\">\n                    {Array.of(movieDetail?.popularity_score)?.map((item) => (\n                      <img src={rate} key={item} alt=\"\" />\n                    ))}\n                  </span>\n                  {/* </span> */}\n                  <span>{movieDetail.year}</span>\n                  <span>/</span>\n                  <span>{movieDetail.area}</span>\n                  <span>/</span>\n                  <span>{movieDetail.type_name}</span>\n                  {movieDetail.tags && movieDetail.tags.length > 0 && (\n                    <>\n                      {movieDetail.tags.map((tag, index) => (\n                        <React.Fragment key={index}>\n                          <span>/</span>\n                          <span>{tag.name || \"暂无标签\"}</span>\n                        </React.Fragment>\n                      ))}\n                    </>\n                  )}\n                </div>\n\n                {/* Right Section: 简介 and Chevron Icon */}\n                <div\n                  className=\"right-section flex items-center\"\n                  onClick={handleDetailClick}\n                >\n                  <span className=\"font-semibold text-[14px]\">简介</span>\n                  <FontAwesomeIcon\n                    icon={faChevronRight}\n                    className=\"text-md ml-1\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Action Buttons - moved to sticky bottom bar */}\n            {/* <div className=\"h-20\" /> Spacer for sticky bar */}\n            {/* Warning Message */}\n            <div className=\"warning bg-gray-800 rounded-md text-white text-center\">\n              <div className=\"warning-content\">\n                <span className=\"warning-text\">\n                  ⬇️官方推荐靠谱平台⬇️，请勿相信视频中任何广告，谨防被骗！\n                </span>\n                <span className=\"warning-text\">\n                  ⬇️官方推荐靠谱平台⬇️，请勿相信视频中任何广告，谨防被骗！\n                </span>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {visible && (\n          <div\n          className={`text-[12px] fixed w-fit top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 py-3 px-5 flex items-center justify-center gap-1 rounded-full toast text-white text-center z-[9999999999999999999]`}\n        >\n          <img src={icon} className=\"w-6 h-6\" alt=\"\" />\n          <span className=\" text-[13px]\">链接已复制 </span>\n        </div>\n      )}\n\n        {activeTab === \"tab-2\" ? (\n          <div id=\"tab-2\" className=\"block\">\n            {/* Comment section or other content */}\n            <CommentComponent\n              movieId={id}\n              lowerDivHeight={lowerDivHeightRef.current}\n              setCommentCount={setCommentCount}\n              commentCount={commentCount}\n              comments={comments}\n              setComments={setComments}\n              hasMore={hasMore}\n              setHasMore={setHasMore}\n            />\n          </div>\n        ) : (\n          <div className=\"mt-4\">\n            {/* {adsData && <AdsSection adsDataList={adsData?.player_episode_up} />} */}\n            <NewAds section={\"player_episode_up\"} fromMovie={true} />\n          </div>\n        )}\n      </div>\n\n      {/* Modal for sharing */}\n      {showModal && (\n        <div className=\"fixed inset-0 z-50 flex items-end\">\n          <div\n            ref={modalRef}\n            className=\"bg-background backdrop-blur-md w-full max-w-md bottom-0 rounded-lg p-6 text-white overflow-y-auto\"\n            style={{ height: `${lowerDivHeightRef.current}px` }}\n          >\n            {/* Modal Header */}\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-xl font-semibold\">简介</h2>\n              <button\n                onClick={handleCloseModal}\n                className=\"text-gray-300 hover:text-white\"\n              >\n                <FontAwesomeIcon icon={faTimes} className=\"text-lg\" />\n              </button>\n            </div>\n\n            {/* Modal Content */}\n            <div className=\"modal-content\">\n              {/* Movie Title and Information */}\n              <h2 className=\"text-2xl font-bold mb-2\">\n                {movieDetail.name || \"\"}\n              </h2>\n              <div className=\"flex items-center text-sm text-gray-400 mb-4\">\n                <span className=\"text-orange-500 flex items-center\">\n                  <img src={rate} alt=\"\" />\n                  {movieDetail.popularity_score || 0}\n                </span>\n                <span className=\"mx-2\">|</span>\n                <span>{movieDetail.type_name || \"Unknown Type\"}</span>\n                <span className=\"mx-2\">/</span>\n                <span>{movieDetail.year || \"Unknown Year\"}</span>\n                <span className=\"mx-2\">/</span>\n                <span>{movieDetail.area || \"Unknown Area\"}</span>\n              </div>\n\n              {/* Cast Section */}\n              <h3 className=\"text-lg font-semibold mt-4\">演员表</h3>\n              <div className=\"text-gray-400 text-sm mt-2\">\n                <div className=\"flex space-x-4\">\n                  {/* Director */}\n                  <span>\n                    导演{\" \"}\n                    <span className=\"text-white\">\n                      {movieDetail?.members?.find((member) => member.type === 3)\n                        ?.name || \"Unknown\"}\n                    </span>\n                  </span>\n                  {/* Screenwriter */}\n                  <span>\n                    编剧{\" \"}\n                    <span className=\"text-white\">\n                      {movieDetail?.members?.find((member) => member.type === 2)\n                        ?.name || \"Unknown\"}\n                    </span>\n                  </span>\n                </div>\n                {/* Actors */}\n                <div className=\"mt-2\">\n                  <span>演员 </span>\n                  {movieDetail?.members\n                    ?.filter((member) => member.type === 1)\n                    .map((actor, index) => (\n                      <span key={index} className=\"text-white\">\n                        {actor.name || \"Unknown\"}\n                        {index <\n                        movieDetail.members.filter(\n                          (member) => member.type === 1\n                        ).length -\n                          1\n                          ? \", \"\n                          : \"\"}\n                      </span>\n                    )) || <span className=\"text-white\">Unknown</span>}\n                </div>\n              </div>\n\n              {/* Introduction Section */}\n              <h3 className=\"text-lg font-semibold mt-6\">简介</h3>\n              <p className=\"text-gray-300 mt-2 leading-relaxed\">\n                {movieDetail.content || \"No description available.\"}\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n      {showFeedbackModal && (\n        <FeedbackComponent\n          movieId={id}\n          onActionComplete={handleTabClick}\n          onClose={handleFeedbackModel}\n          setIsLoading={setIsLoading}\n          isLoading={isLoading}\n          height={`${lowerDivHeightRef?.current}px`}\n        />\n      )}\n\n      {/* Sticky Bottom Action Bar */}\n      {activeTab === \"tab-1\" && <div\n        className=\"fixed bottom-0 left-0 w-full z-50 bg-[#1F1F21] flex justify-between items-center px-2 py-2\"\n        style={{ boxShadow: \"0 -2px 8px rgba(0,0,0,0.2)\" }}\n      >\n        <div className=\"flex flex-1 justify-evenly\">\n          {/* 下载本地 */}\n          <button\n            onClick={() => setIsModalOpen(true)}\n            className=\"flex flex-col items-center px-2 py-1 rounded-md\"\n          >\n            <img src={episode} alt=\"\" className=\"h-5 mb-[5px] mt-0.5\" />\n            <span className=\"text-white/40 text-[14px]\">选集</span>\n          </button>\n          {/* 收藏 */}\n          <button\n            onClick={() => handleTabClick(\"star\")}\n            className=\"flex flex-col items-center px-2 py-1 rounded-md\"\n          >\n            <img\n              src={isStarred ? selectedStar : star}\n              alt=\"\"\n              className=\"h-6 mb-1\"\n            />\n            <span className=\"text-white/40 text-[13px]\">收藏</span>\n          </button>\n          {/* 反馈/求片 */}\n          <button\n            onClick={() => handleTabClick(\"feedback\")}\n            className=\"flex flex-col items-center px-2 py-1 rounded-md\"\n          >\n            <img src={info} alt=\"\" className=\"h-6 mb-1\" />\n            <span className=\"text-white/40 text-[13px]\">反馈/求片</span>\n          </button>\n        </div>\n        {/* 分享好友得积分按钮 */}\n        <button\n          onClick={() => handleShare()}\n          disabled={isLoading}\n          className={`ml-2 flex items-center rounded-full px-5 py-2 relative min-w-[170px] justify-center ${\n            isLoading ? 'opacity-70 cursor-not-allowed' : ''\n          }`}\n          style={{\n            background:\n              \"linear-gradient(271deg, rgba(254,228,179,0.06) 0%, rgba(255,217,147,0.06) 100%)\",\n            backgroundBlendMode: \"normal\",\n            backgroundRepeat: \"no-repeat\",\n            backgroundSize: \"cover\",\n          }}\n        >\n          <div className=\"flex justify-start items-start flex-row gap-2.5 px-1.5 bg-[#FF6A33] rounded-tl-[10px] rounded-tr-sm rounded-br-[10px] rounded-bl-sm absolute right-[0px] top-[-7.5px]\">\n            <span className=\"text-[#FFFFFF] text-[10px] font-['PingFang_SC'] text-center font-medium\">\n              可兑换\n            </span>\n          </div>\n          {isLoading ? (\n            <>\n              <div className=\"animate-spin rounded-full h-5 w-5 border-2 border-[#E6D3A7] border-t-transparent mr-2\"></div>\n              <span className=\"text-[#E6D3A7] text-[15px] font-normal\">\n              </span>\n            </>\n          ) : (\n            <>\n              <img src={share} className=\"h-6 mr-1\" alt=\"\" />\n              <span className=\"text-[#E6D3A7] text-[15px] font-normal\">\n                分享好友得积分\n              </span>\n            </>\n          )}\n        </button>\n      </div>}\n    </div>\n  );\n};\n\nexport default DetailSection;\n","import React, { useEffect, useRef } from 'react';\nimport { EpisodeSelectorProps } from '../../../model/videoModel';\n\nconst EpisodeSelector: React.FC<EpisodeSelectorProps> = ({ episodes, selectedEpisode, onEpisodeSelect }) => {\n  const selectedEpisodeRef = useRef<HTMLButtonElement | null>(null);\n\n  useEffect(() => {\n    if (selectedEpisodeRef.current) {\n      selectedEpisodeRef.current.scrollIntoView({\n        behavior: 'smooth',\n        inline: 'center', // Ensure horizontal centering\n        block: 'nearest', // Keep vertical positioning intact\n      });\n    }\n  }, [selectedEpisode]);\n\n  return (\n    <div className=\"overflow-x-auto whitespace-nowrap m-4 bg-background remove-scrollbar\"> {/* Horizontal scroll container */}\n      <div className=\"inline-flex space-x-3\"> {/* Inline flex for horizontal layout */}\n        {episodes.map((episode) => (\n          <button\n            key={episode.episode_id}\n            ref={selectedEpisode?.episode_id === episode.episode_id ? selectedEpisodeRef : null} // Set ref for selected episode\n            onClick={() => onEpisodeSelect(episode)}\n            className={`py-2 px-4 rounded-lg focus:outline-none relative ${\n              selectedEpisode?.episode_id === episode.episode_id\n                ? 'bg-episodeSelected text-white'\n                : 'bg-source text-white'\n            }`}\n            style={{ minWidth: '100px' }}  // Adjust width for uniformity\n          >\n            <span>{episode.episode_name}</span>\n\n            {/* Loader animation under the selected episode */}\n            {selectedEpisode?.episode_id === episode.episode_id && (\n              <div className=\"absolute left-1/2 transform -translate-x-1/2 bottom-[2px] loader\">\n                <div></div>\n                <div></div>\n                <div></div>\n              </div>\n            )}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default EpisodeSelector;","import { Link, useNavigate } from \"react-router-dom\";\nimport he from \"he\";\n// import videoIcon from \"../../assets/videoIcon.svg\";\nimport LazyLoadImage from \"../../../components/home/LazyLoadImage\";\n\nconst MovieCard = ({\n  movie,\n  height = \"165px\",\n  width = \"114px\",\n  showRecommandMovie,\n}) => {\n  const showMovie = () => {\n    // navigate(`/player/${movie?.id}`);\n    showRecommandMovie(movie?.id);\n  };\n  return (\n    <div className=\"movie-item max-sm:h-auto cursor-default relative mt-2\">\n    <div\n      className={`block relative zoom-effect`}\n      onClick={()=>showMovie(movie?.id)}\n    >\n      <div className={`img_a relative  w-full border-none`}>\n        <LazyLoadImage\n          src={movie.cover}\n          alt={movie.name}\n          className={`movie_img rounded-[4px] border-none  cursor-default object-cover w-full`}\n        />\n        <div className=\"absolute rounded-[4px]  h-full w-full inset-0 bg-gradient-to-b from-transparent via-black/5 to-black\"></div>\n        <div className=\"flex absolute text-[12px] justify-between items-center px-3 bottom-2 w-full\">\n          <p className=\"flex-1 truncate text-white\">{movie?.dynamic}</p>\n          <p className=\"flex-1 flex justify-end text-white\">\n            {movie?.type_name}\n          </p>\n        </div>\n      </div>\n\n      <div className=\"overlay\">\n        {/* <img className=\"h-[40px]\" src={videoIcon} alt=\"\" /> */}\n      </div>\n      {movie?.label?.length ? (\n        <div className=\"absolute top-0 right-0 search_card_score z-10\">\n          <p className=\"truncate text-center\">{movie?.label}</p>\n        </div>\n      ) : (\n        <></>\n      )}\n      {/* <div className=\"top-0 right-0 search_card_score truncate z-1 absolute w-[40px] flex justify-center items-center\">\n        <span>{movie?.label}</span>\n      </div> */}\n    </div>\n\n    <div className=\"text-container\">\n      <div className=\"movie-info\">\n        <h2\n          className={`text-[14px] mt-[.14rem] leading-[18px] font-confortFont font-[400] text-white truncate`}\n        >\n          {he.decode(movie?.name || \"Unknown Title\")}\n        </h2>\n      </div>\n    </div>\n  </div>\n  );\n};\n\nexport default MovieCard;\n","import React from \"react\";\n// import MovieCard from \"./MovieCard\";\nimport MovieCard from \"./MovieCard\";\n\nconst RecommendedList = ({ data, showRecommandMovie }: any) => {\n  return (\n    <div className=\"pb-16 px-5\">\n      <h1 className=\"text-white mb-3 my-5 text-[18px]\">相关推荐</h1>\n      <div className=\"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2 pt-1 mb-4\">\n        {data?.recommendList?.map((movie: any) => (\n          <MovieCard\n            key={movie.id}\n            movie={movie}\n            height={\"200px\"}\n            showRecommandMovie={showRecommandMovie}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default RecommendedList;\n","import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\n\nconst NetworkError: React.FC<any> = ({ switchNow, refresh, onBack }) => {\n  const navigate = useNavigate();\n  const [countdown, setCountdown] = useState(5);\n\n  // Auto-switch countdown\n  useEffect(() => {\n    if (countdown > 0) {\n      const timer = setTimeout(() => {\n        setCountdown(countdown - 1);\n      }, 1000);\n      return () => clearTimeout(timer);\n    } else {\n      // Auto switch when countdown reaches 0\n      switchNow();\n    }\n  }, [countdown, switchNow]);\n\n  return (\n    <div\n      className=\"sticky top-0 z-50 flex justify-center items-center w-full h-[220px]\"\n      style={{\n        backgroundSize: \"cover\",\n        backgroundPosition: \"center\",\n        background: \"#0D0D0D\"\n        // background: 'linear-gradient(180deg, #000000 0%, #3C3C3C 100%)'\n      }}\n    >\n      {/* Back Arrow */}\n      <div className=\"absolute top-4 left-4 z-50\">\n        <button className=\"text-white text-2xl\" onClick={onBack}>\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n          >\n            <path\n              d=\"M7.828 11H20V13H7.828L13.192 18.364L11.778 19.778L4 12L11.778 4.22198L13.192 5.63598L7.828 11Z\"\n              fill=\"white\"\n            />\n          </svg>\n        </button>\n      </div>\n\n      {/* Error Content */}\n      <div className=\"w-[324px] h-[76px] flex justify-center items-center flex-col gap-4 mt-4\">\n        <span className=\"text-[#BBBBBB] text-[18px] font-['Helvetica_Neue'] text-center font-bold leading-6\">\n          播放出错，请尝试切换资源，或刷新一下\n        </span>\n        \n        <div className=\"flex justify-center items-center flex-row gap-3\">\n          {/* Refresh Button */}\n          <button \n            className=\"w-[100px] h-[36px] rounded-[18px] border border-white/20 bg-white/10 flex items-center justify-center\"\n            onClick={refresh}\n          >\n            <span className=\"text-white text-[14px] font-['Helvetica_Neue']\">\n              刷新一下\n            </span>\n          </button>\n\n          {/* Switch Resources Button with Countdown */}\n          <button \n            className=\"w-[100px] h-[36px] rounded-[18px] bg-[#F54100] flex items-center justify-center\"\n            onClick={switchNow}\n          >\n            <span className=\"text-white text-[14px] font-['Helvetica_Neue'] font-bold\">\n              切换资源 {countdown} 秒\n            </span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default NetworkError;\n","import \"./LoadingStyle.css\";\nimport Logo from \"../../../assets/loadingLogo.png\";\n\nconst PlayerLoading: React.FC<any> = ({onBack}) => {\n  return (\n    <>\n      <div className=\"loading-back flex-row pt-16\">\n      <div className=\"absolute top-3 left-4 z-50\">\n      <button className=\"text-white text-2xl\" onClick={onBack}>\n        <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"24\"\n              height=\"24\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n            >\n              <path\n                d=\"M7.828 11H20V13H7.828L13.192 18.364L11.778 19.778L4 12L11.778 4.22198L13.192 5.63598L7.828 11Z\"\n                fill=\"white\"\n              />\n            </svg>\n      </button>\n    </div>\n        <img src={Logo} alt=\"\" className=\"m-auto h-12\"/>\n        <div className=\"animated-line\"></div>\n        <div className=\"text\">精彩即将开始...</div>\n      </div>\n    </>\n  );\n};\n\nexport default PlayerLoading;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\nimport VideoPlayer from \"./video/VideoPlayer\";\nimport SourceSelector from \"./video/SourceSelector\";\nimport DetailSection from \"./video/DetailSection\";\nimport EpisodeSelector from \"./video/EpisodeSelector\";\nimport Loader from \"../search/components/Loader\";\nimport noPlayImage from \"../../assets/noplay.svg\";\nimport RecommendedList from \"./video/RecommendedList\";\nimport AdsSection from \"./video/AdsSection\";\nimport NetworkError from \"./video/NetworkError\";\nimport { Episode, MovieDetail, AdsData } from \"../../model/videoModel\";\nimport {\n  getMovieDetail,\n  getAdsData,\n  getEpisodesBySource,\n  reportPlaybackProgress,\n  parsePlaybackUrl,\n  fetchCommentData,\n} from \"../../services/playerService\";\nimport NewAds from \"../../components/NewAds\";\nimport {\n  convertToSecureUrl,\n  decryptWithAes,\n} from \"../../services/newEncryption\";\nimport PlayerLoading from \"./video/PlayerLoading\";\n\nconst useDynamicHeight = () => {\n  const [availableHeight, setAvailableHeight] = useState(300);\n  const [hasElement, setHasElement] = useState(false);\n\n  useEffect(() => {\n    const calculateHeight = () => {\n      const upperDiv = document.getElementById(\"upper-div\");\n      if (upperDiv) {\n        const windowHeight = window.innerHeight;\n        const upperDivHeight = upperDiv.offsetHeight;\n        const tabsHeight = 60;\n        const padding = 20;\n        const calculated = windowHeight - upperDivHeight - tabsHeight - padding;\n        setAvailableHeight(Math.max(calculated, 300));\n        if (!hasElement) setHasElement(true);\n      }\n    };\n\n    // Try immediately\n    calculateHeight();\n\n    if (!hasElement) {\n      // Set up MutationObserver if element not found\n      const observer = new MutationObserver((mutations) => {\n        if (document.getElementById(\"upper-div\")) {\n          calculateHeight();\n          observer.disconnect();\n        }\n      });\n\n      observer.observe(document.body, {\n        childList: true,\n        subtree: true,\n      });\n\n      // Also try periodically as fallback\n      const interval = setInterval(() => {\n        if (document.getElementById(\"upper-div\")) {\n          calculateHeight();\n          clearInterval(interval);\n        }\n      }, 100);\n\n      window.addEventListener(\"resize\", calculateHeight);\n\n      return () => {\n        observer.disconnect();\n        clearInterval(interval);\n        window.removeEventListener(\"resize\", calculateHeight);\n      };\n    } else {\n      // Element exists, just listen for resize\n      window.addEventListener(\"resize\", calculateHeight);\n      return () => window.removeEventListener(\"resize\", calculateHeight);\n    }\n  }, [hasElement]);\n\n  return availableHeight;\n};\n// Custom hook for dynamic height calculation\n// const useDynamicHeight = () => {\n//   const [availableHeight, setAvailableHeight] = useState(300);\n\n//   useEffect(() => {\n//     const calculateHeight = () => {\n//       const upperDiv = document.getElementById(\"upper-div\");\n//       const windowHeight = window.innerHeight;\n//       console.log(upperDiv);\n\n//       if (upperDiv) {\n//         const upperDivHeight = upperDiv.offsetHeight;\n//         const tabsHeight = 60; // Approximate height of tabs section\n//         const padding = 20; // Additional padding/margin\n//         const calculated = windowHeight - upperDivHeight - tabsHeight - padding;\n//         console.log(calculated, \"calculated height\");\n//         setAvailableHeight(Math.max(calculated, 300)); // Minimum 300px\n//       }\n//     };\n\n//     calculateHeight();\n//     window.addEventListener(\"resize\", calculateHeight);\n\n//     return () => window.removeEventListener(\"resize\", calculateHeight);\n//   }, []);\n\n//   return availableHeight;\n// };\n\nconst DetailPage: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n\n  const availableHeight = useDynamicHeight();\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const [movieDetail, setMovieDetail] = useState<MovieDetail | null>(null);\n  const [currentEpisode, setCurrentEpisode] = useState<Episode | null>(null);\n  const [currentEpisodeNumber, setCurrentEpisodeNumber] = useState<number>(0);\n  const [adsData, setAdsData] = useState<AdsData | null>(null);\n  const [selectedSource, setSelectedSource] = useState(0);\n  const [activeTab, setActiveTab] = useState(\"tab-1\");\n  const [resumeTime, setResumeTime] = useState(0);\n  const [wholePageError, setWholePageError] = useState(false);\n  const [errorVideoUrl, setErrorVideoUrl] = useState(\"\");\n  const abortControllerRef = useRef<AbortController | null>(null);\n  const [episodes, setEpisodes] = useState<any>([]);\n  const [forwardedCount, setForwardedCount] = useState(-1);\n  const [commentCount, setCommentCount] = useState(0);\n  const [visible, setVisible] = useState(false);\n  const [isPlayerLoading, setIsPlayerLoading] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState(false); // Modal state\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchComments();\n  }, []);\n\n  const fetchComments = async () => {\n    try {\n      const response: any = await fetchCommentData(id || \"\");\n      if (response) {\n        const data: any = await decryptWithAes(response);\n        setCommentCount(data?.data?.total);\n      }\n    } catch (err) {\n      console.log(\"err is=>\", err);\n    }\n  };\n  const autoPlayNextSource = async () => {\n    if (!movieDetail?.play_from) return;\n    for (let i = selectedSource + 1; i < movieDetail.play_from.length; i++) {\n      const nextSource = movieDetail.play_from[i];\n      try {\n        const res = await getEpisodesBySource(nextSource.code, id || \"\");\n        setCurrentEpisode(res.data[0]);\n        setEpisodes(res.data);\n        setSelectedSource(i);\n        if (res.data?.[0]) {\n          setWholePageError(false);\n        }\n        return;\n      } catch (error) {\n        console.error(\"Error auto-playing next episode:\", error);\n      }\n    }\n  };\n\n  const autoPlayNextEpisode = async () => {\n    const nextEpisode = currentEpisodeNumber + 1;\n    if (episodes?.length > nextEpisode) {\n      setCurrentEpisode(episodes[nextEpisode]);\n      setCurrentEpisodeNumber(nextEpisode);\n    }\n  };\n\n  useEffect(() => {\n    if (id) {\n      setWholePageError(false);\n      fetchMovieDetail();\n      fetchAdsData();\n    }\n  }, [id]);\n\n  const fetchAdsData = async () => {\n    try {\n      const res = await getAdsData();\n      setAdsData(res.data);\n    } catch (error) {\n      console.error(\"Error fetching ads data:\", error);\n    }\n  };\n\n  const fetchMovieDetail = async (movieId = \"\") => {\n    try {\n      const res = await getMovieDetail(movieId || id || \"\");\n      await setInitialEpisode(res?.data);\n      await setMovieDetail(res?.data);\n      setWholePageError(false);\n      setIsPlayerLoading(false);\n    } catch (error) {\n      console.error(\"Error fetching movie details:\", error);\n      setIsPlayerLoading(false);\n    }\n  };\n\n  const setInitialEpisode = async (mvDetail: any) => {\n    if (mvDetail) {\n      const playBackInfo = mvDetail.last_playback;\n      if (playBackInfo && playBackInfo.movie_from) {\n        const sourceIndex = mvDetail?.play_from?.findIndex(\n          (x: any) => x.code === playBackInfo.movie_from\n        );\n        if (sourceIndex > -1) {\n          const episodeIndex = mvDetail?.play_from[\n            sourceIndex\n          ]?.list?.findIndex(\n            // eslint-disable-next-line eqeqeq\n            (x: any) => x.episode_id == playBackInfo.episode_id\n          );\n          if (episodeIndex > -1) {\n            const mvData = mvDetail?.play_from[sourceIndex]?.list[episodeIndex];\n            if (!mvData.ready_to_play) {\n              const parseData = await parsePlaybackUrl(\n                mvData.episode_id,\n                mvData.from_code,\n                mvData.play_url,\n                \"1\"\n              );\n              mvData.parseUrl = parseData?.data?.play_url;\n            }\n            setCurrentEpisode(mvData);\n            setCurrentEpisodeNumber(episodeIndex);\n            setEpisodes(mvDetail?.play_from[sourceIndex]?.list);\n            setResumeTime(playBackInfo.current_time);\n            return;\n          } else {\n            setCurrentEpisode(mvDetail?.play_from[0]);\n            setEpisodes(mvDetail?.play_from[0]?.list);\n          }\n        }\n      } else {\n        // Fallback to the first available episode\n        if (\n          mvDetail?.play_from?.[selectedSource]?.list?.[currentEpisodeNumber]\n        ) {\n          const mvData = mvDetail?.play_from[selectedSource].list[0];\n          if (!mvData.ready_to_play) {\n            try {\n              const parseData = await parsePlaybackUrl(\n                mvData.episode_id,\n                mvData.from_code,\n                mvData.play_url,\n                \"1\"\n              );\n              mvData.parseUrl = await parseData?.data?.play_url;\n              setCurrentEpisode(mvData);\n              setResumeTime(0);\n            } catch (err) {\n              setCurrentEpisode(mvData);\n              setWholePageError(true);\n            }\n          } else {\n            setCurrentEpisode(mvData);\n            setResumeTime(0);\n          }\n          setEpisodes(mvDetail?.play_from[selectedSource].list);\n        } else {\n          setWholePageError(true);\n        }\n        if (mvDetail?.play_from && mvDetail?.play_from.length === 0) {\n          setWholePageError(true);\n        }\n      }\n    }\n  };\n\n  const handleEpisodeSelect = (episode: Episode) => {\n    // Cancel any ongoing request\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n    const index = episodes.findIndex(\n      (x: Episode) => x.episode_id === episode.episode_id\n    );\n    setCurrentEpisodeNumber(index > 0 ? index : 0);\n    setCurrentEpisode(episode);\n    setWholePageError(false);\n    setResumeTime(0);\n  };\n\n  const navigateBackFunction = () => {\n    if (currentEpisode) {\n      reportProgress(currentEpisode);\n    }\n    setCurrentEpisode(null);\n    navigate(forwardedCount);\n    // navigate(\"/home\");\n  };\n\n  const reportProgress = async (episode: Episode) => {\n    if (!movieDetail || !episode) return;\n    try {\n      await reportPlaybackProgress(\n        movieDetail.id,\n        episode?.episode_id?.toString() || \"\",\n        episode.from_code,\n        movieDetail.last_playback?.duration || 0,\n        resumeTime || 0\n      );\n    } catch (error) {\n      console.error(\"Error reporting playback progress:\", error);\n    }\n  };\n\n  const switchNow = () => {\n    setWholePageError(false);\n    autoPlayNextSource();\n  };\n\n  useEffect(() => {\n    if (currentEpisode) {\n      // Removed window.scrollTo as we're controlling container scroll instead\n    }\n  }, [movieDetail, currentEpisode]);\n\n  // Reset scroll position on initial load and when episode changes\n  useEffect(() => {\n    if (scrollContainerRef.current && currentEpisode) {\n      // Small delay to ensure DOM is fully rendered\n      setTimeout(() => {\n        if (scrollContainerRef.current) {\n          scrollContainerRef.current.scrollTop = 0;\n        }\n      }, 100);\n    }\n  }, [currentEpisode, movieDetail]);\n\n  const handleVideoError = (errorUrl: string) => {\n    // if (errorVideoUrl !== errorUrl && errorUrl) {\n    //   setErrorVideoUrl(errorUrl);\n    //   setWholePageError(true);\n    // }\n    setWholePageError(true);\n  };\n\n  useEffect(() => {\n    if (currentEpisode?.play_url) {\n      sendMovieDetailEventToNative(movieDetail);\n      sendEventToNative(currentEpisode?.play_url);\n    }\n  }, [currentEpisode, movieDetail]);\n\n  const sendEventToNative = async (url: string) => {\n    if (\n      (window as any).webkit &&\n      (window as any).webkit.messageHandlers &&\n      (window as any).webkit.messageHandlers.jsBridge\n    ) {\n      // Parse a fresh URL specifically for the native player\n      if (currentEpisode && !currentEpisode.ready_to_play) {\n        try {\n          // Get a freshly parsed URL for the native player\n          const parseData = await parsePlaybackUrl(\n            currentEpisode.episode_id?.toString() || \"\",\n            currentEpisode.from_code,\n            currentEpisode.play_url,\n            \"1\"\n          );\n\n          // Send the freshly parsed URL to native\n          (window as any).webkit.messageHandlers.jsBridge.postMessage({\n            eventName: \"playUrl\",\n            value: parseData?.data?.play_url || url,\n          });\n        } catch (error) {\n          console.error(\"Error parsing playback URL for native player:\", error);\n          // Fallback to sending the original URL if parsing fails\n          (window as any).webkit.messageHandlers.jsBridge.postMessage({\n            eventName: \"playUrl\",\n            value: url,\n          });\n        }\n      } else {\n        // If ready_to_play or no parsing needed, just send the url as is\n        (window as any).webkit.messageHandlers.jsBridge.postMessage({\n          eventName: \"playUrl\",\n          value: url,\n        });\n      }\n\n      // Check if the next episode exists and is ready to play\n      const nextEpisode = episodes?.[currentEpisodeNumber + 1];\n\n      if (nextEpisode && !nextEpisode.ready_to_play) {\n        try {\n          // Always parse a fresh URL for the next episode for native player\n          const parseData = await parsePlaybackUrl(\n            nextEpisode.episode_id?.toString() || \"\",\n            nextEpisode.from_code,\n            nextEpisode.play_url,\n            \"1\"\n          );\n\n          // Send the freshly parsed next episode URL to native\n          (window as any).webkit.messageHandlers.jsBridge.postMessage({\n            eventName: \"playUrlForNextEpisode\",\n            value: parseData?.data?.play_url,\n          });\n        } catch (error) {\n          console.error(\"Error parsing playback URL for next episode:\", error);\n        }\n      } else if (nextEpisode) {\n        // If the next episode is ready to play, send its URL directly\n        (window as any).webkit.messageHandlers.jsBridge.postMessage({\n          eventName: \"playUrlForNextEpisode\",\n          value: nextEpisode.play_url,\n        });\n      }\n    } else {\n      console.warn(\"JS Bridge is not available in the current environment.\");\n    }\n  };\n\n  const sendMovieDetailEventToNative = (mDetail: any) => {\n    if (\n      (window as any).webkit &&\n      (window as any).webkit.messageHandlers &&\n      (window as any).webkit.messageHandlers.jsBridge\n    ) {\n      (window as any).webkit.messageHandlers.jsBridge.postMessage({\n        eventName: \"movieDetail\",\n        value: mDetail,\n      });\n    }\n  };\n\n  const sendEpisodeListEventToNative = (episodeList: any) => {\n    if (\n      (window as any).webkit &&\n      (window as any).webkit.messageHandlers &&\n      (window as any).webkit.messageHandlers.jsBridge\n    ) {\n      (window as any).webkit.messageHandlers.jsBridge.postMessage({\n        eventName: \"episodeList\",\n        value: episodeList,\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (episodes?.length > 0) {\n      sendEpisodeListEventToNative(episodes);\n    }\n  }, [episodes]);\n\n  // Reset scroll position when switching to tab-1\n  useEffect(() => {\n    if (activeTab === \"tab-1\" && scrollContainerRef.current) {\n      setTimeout(() => {\n        if (scrollContainerRef.current) {\n          scrollContainerRef.current.scrollTop = 0;\n        }\n      }, 50);\n    }\n  }, [activeTab]);\n\n  const handleChangeSource = async (nextSource: any) => {\n    if (nextSource && nextSource.code && id) {\n      setIsPlayerLoading(true);\n      try {\n        const res = await getEpisodesBySource(nextSource.code, id || \"\");\n        const mvData = res.data?.[0];\n        setWholePageError(false);\n        if (!mvData?.ready_to_play) {\n          const data = mvData;\n          const response = await parsePlaybackUrl(\n            data.episode_id,\n            data.from_code,\n            data.play_url,\n            \"1\"\n          );\n          mvData.parseUrl = response?.data?.play_url;\n        }\n        if (currentEpisodeNumber > -1) {\n          if (res.data?.length > currentEpisodeNumber) {\n            setCurrentEpisode(res.data[currentEpisodeNumber]);\n          } else {\n            setCurrentEpisode(res.data[res.data?.length - 1]);\n          }\n        } else {\n          setCurrentEpisode(res.data[0]);\n        }\n        setEpisodes(res.data);\n      } catch (error) {\n        console.error(\"Error auto-playing next episode:\", error);\n      } finally {\n        setTimeout(() => {\n          setIsPlayerLoading(false);\n        }, 1500);\n      }\n    }\n  };\n\n  useEffect(() => {\n    const handleIosEvent = (event: CustomEvent) => {\n      const index = event.detail?.index || 0;\n      setSelectedSource(Number(index));\n      const nextSource = { code: event.detail.code };\n      handleChangeSource(nextSource);\n    };\n\n    // Listen for the `iosEvent`\n    window.addEventListener(\n      \"getSourceCode_iOS\",\n      handleIosEvent as EventListener\n    );\n\n    // Cleanup the event listener when the component unmounts\n    return () => {\n      window.removeEventListener(\n        \"getSourceCode_iOS\",\n        handleIosEvent as EventListener\n      );\n    };\n  }, []);\n\n  useEffect(() => {\n    const handleIosEvent = (event: CustomEvent) => {\n      if (event?.detail?.episode_id && episodes?.length > 0) {\n        const index = episodes.findIndex(\n          (x: Episode) => x.episode_id == event.detail.episode_id\n        );\n        const episode = index >= 0 ? episodes[index] : episodes[0];\n        handleEpisodeSelect(episode);\n      }\n    };\n\n    // Listen for the `iosEvent`\n    window.addEventListener(\n      \"getEpisodeId_iOS\",\n      handleIosEvent as EventListener\n    );\n\n    // Cleanup the event listener when the component unmounts\n    return () => {\n      window.removeEventListener(\n        \"getEpisodeId_iOS\",\n        handleIosEvent as EventListener\n      );\n    };\n  }, [episodes]);\n\n  const refresh = () => {\n    setIsPlayerLoading(true);\n    setWholePageError(false);\n    fetchMovieDetail(movieDetail?.id);\n  };\n\n  console.log(wholePageError, \"wholePageError\");\n\n  const showRecommandMovie = (id: string) => {\n    setCurrentEpisode(null);\n    setMovieDetail(null);\n    setSelectedSource(0);\n    setCurrentEpisodeNumber(0);\n    fetchMovieDetail(id);\n  };\n  return (\n    <div className=\"bg-background full-height-fallback overflow-hidden\">\n      {!movieDetail ? (\n        <>\n          <PlayerLoading onBack={navigateBackFunction} />\n          <div className=\"flex justify-center items-center pt-52 bg-background\">\n            <Loader />\n          </div>\n        </>\n      ) : (\n        <>\n          <div className=\"sticky top-0 z-50\">\n            <div id=\"upper-div\">\n              {!wholePageError ? (\n                !isPlayerLoading ? (\n                  <VideoPlayer\n                    key={currentEpisode?.episode_id}\n                    videoUrl={\n                      !isPlayerLoading\n                        ? currentEpisode?.parseUrl ||\n                          currentEpisode?.play_url ||\n                          \"\"\n                        : \"\"\n                    }\n                    onBack={navigateBackFunction}\n                    movieDetail={movieDetail}\n                    selectedEpisode={currentEpisode}\n                    resumeTime={resumeTime}\n                    handleVideoError={handleVideoError}\n                    autoPlayNextEpisode={autoPlayNextEpisode}\n                  />\n                ) : (\n                  <PlayerLoading onBack={navigateBackFunction} />\n                )\n              ) : (\n                <NetworkError\n                  switchNow={switchNow}\n                  refresh={refresh}\n                  onBack={navigateBackFunction}\n                />\n              )}\n            </div>\n            <div\n              className=\"relative flex px-2 justify-between items-center bg-background\"\n              style={{\n                paddingBottom: \"10px\",\n                borderBottom: \"2px solid #2a2a2a\",\n              }}\n            >\n              <div className=\"flex\">\n                <div\n                  className={`px-4 py-3 bg-background text-gray-400 rounded-t-lg cursor-pointer relative ${\n                    activeTab === \"tab-1\" ? \"text-white z-10\" : \"\"\n                  }`}\n                  onClick={() => setActiveTab(\"tab-1\")}\n                >\n                  <span className=\"text-white text-[16px]\">详情</span>\n                  {activeTab === \"tab-1\" && (\n                    <div className=\"absolute bottom-0 left-3 w-4/6 h-1 bg-mainColor rounded-md\"></div>\n                  )}\n                </div>\n                <div\n                  className={`px-4 py-3 bg-background text-gray-400 rounded-t-lg cursor-pointer relative ${\n                    activeTab === \"tab-2\" ? \"text-white z-10\" : \"\"\n                  }`}\n                  onClick={() => setActiveTab(\"tab-2\")}\n                >\n                  <span className=\" text-[16px]\">评论</span>\n                  <span className=\"text-gray-500 ml-1.5 text-sm\">\n                    {commentCount > 99 ? \"99+\" : commentCount || 0}\n                  </span>\n                  {activeTab === \"tab-2\" && (\n                    <div className=\"absolute bottom-0 left-3.5 w-3/6 h-1 bg-mainColor rounded-md\"></div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div\n            ref={scrollContainerRef}\n            className={`${activeTab === \"tab-1\" ? \"overflow-y-scroll\" : \"\"}`}\n            style={{\n              height: activeTab === \"tab-1\" ? `${availableHeight}px` : \"auto\",\n              minHeight: \"auto\",\n            }}\n          >\n            <DetailSection\n              adsData={adsData}\n              movieDetail={movieDetail}\n              id={id || \"\"}\n              activeTab={activeTab}\n              setActiveTab={setActiveTab}\n              setCommentCount={setCommentCount}\n              commentCount={commentCount}\n              setIsModalOpen={setIsModalOpen}\n            />\n            {activeTab === \"tab-1\" && (\n              <>\n                <SourceSelector\n                  changeSource={handleChangeSource}\n                  episodes={episodes || []}\n                  selectedEpisode={currentEpisode}\n                  onEpisodeSelect={handleEpisodeSelect}\n                  movieDetail={movieDetail}\n                  selectedSource={selectedSource}\n                  setSelectedSource={setSelectedSource}\n                  setIsModalOpen={setIsModalOpen}\n                  isModalOpen={isModalOpen}\n                />\n                <EpisodeSelector\n                  episodes={episodes || []}\n                  onEpisodeSelect={handleEpisodeSelect}\n                  selectedEpisode={currentEpisode}\n                />\n\n                {/* <div className=\"mt-8 px-4\"> */}\n                {/* {adsData && <AdsSection adsDataList={adsData?.player_recommend_up} />} */}\n                {/* <NewAds section={\"player_recommend_up\"} fromMovie={true} /> */}\n                {/* </div> */}\n                <RecommendedList\n                  data={movieDetail}\n                  showRecommandMovie={showRecommandMovie}\n                />\n              </>\n            )}\n          </div>\n        </>\n      )}\n      {visible && (\n        <div className=\"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-background text-white text-lg font-medium px-4 py-2 rounded-lg shadow-md\">\n          没有更多资源了\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DetailPage;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { showToast } from \"../../../pages/profile/error/ErrorSlice\";\nimport { useDispatch } from \"react-redux\";\nimport { convertToSecurePayload } from \"../../../services/newEncryption\";\n\ninterface FeedbackComponentProps {\n  onClose: () => void;\n  movieId: string;\n  onActionComplete: (action: string) => void;\n  isLoading: boolean;\n  setIsLoading: (loading: boolean) => void;\n  height: any;\n}\n\nconst FeedbackComponent: React.FC<FeedbackComponentProps> = ({\n  onClose,\n  movieId,\n  onActionComplete,\n  isLoading,\n  setIsLoading,\n  height,\n}) => {\n  const [selectedIssue, setSelectedIssue] = useState<number>(0);\n  const [description, setDescription] = useState<string>(\"\");\n  const dispatch = useDispatch();\n  const modalRef = useRef<any>(null);\n\n  const issues = [\n    {\n      name: \"播放问题\",\n      value: 1000,\n    },\n    {\n      name: \"集数不全\",\n      value: 1001,\n    },\n    {\n      name: \"资源缺失\",\n      value: 1002,\n    },\n    {\n      name: \"信息有误\",\n      value: 1003,\n    },\n    {\n      name: \"积分兑换\",\n      value: 1004,\n    },\n    {\n      name: \"BUG反馈\",\n      value: 1005,\n    },\n  ];\n\n  const handleIssueSelect = (issue: number) => {\n    setSelectedIssue(issue);\n  };\n\n  useEffect(() => {\n    const handleClickOutside = (event: any) => {\n      if (modalRef.current && !modalRef.current.contains(event.target)) {\n        onClose();\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [modalRef]);\n\n  const handleSubmitFeedback = async () => {\n    if (!selectedIssue || !description) {\n      dispatch(showToast({ message: \"请填写所有必填项。\", type: \"error\" }));\n      return;\n    }\n    setIsLoading(true);\n    try {\n      // Submit feedback API call\n      const loginResponse = await localStorage.getItem(\"authToken\");\n      const loginInfo = loginResponse ? JSON.parse(loginResponse || \"\") : null;\n      const authorization =\n        loginInfo && loginInfo.data && loginInfo.data.access_token\n          ? `${loginInfo.data.token_type} ${loginInfo.data.access_token}`\n          : null;\n      if (authorization) {\n        const response = await fetch(\n          `${process.env.REACT_APP_API_URL}/user/feedback/submit`,\n          {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: authorization,\n            },\n            body: JSON.stringify(\n              convertToSecurePayload({\n                extra: movieId,\n                type_id: selectedIssue,\n                content: description,\n              })\n            ),\n          }\n        );\n\n        if (response.ok) {\n          dispatch(showToast({ message: \"反馈提交成功\", type: \"success\" }));\n          onClose();\n        } else {\n          dispatch(\n            showToast({ message: \"提交失败，请稍后重试\", type: \"error\" })\n          );\n        }\n      }\n    } catch (error) {\n      dispatch(showToast({ message: \"提交失败，请稍后重试\", type: \"error\" }));\n      alert(\"提交失败，请稍后重试\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-end justify-center bottom-0\">\n      <div\n        className=\"bg-background backdrop-blur-md w-full max-w-md rounded-xl p-4 text-white\"\n        style={{ height: height }}\n        ref={modalRef}\n      >\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-lg font-bold\">反馈求片</h2>\n          <button onClick={onClose} className=\"text-white\">\n            <FontAwesomeIcon icon={faTimes} className=\"text-xl\" />\n          </button>\n        </div>\n        <div className=\"mb-4\">\n          <h3 className=\"text-md mb-2\">选择遇到的问题</h3>\n          <div className=\"grid grid-cols-2 gap-2\">\n            {issues.map((issue, index) => (\n              <button\n                key={index}\n                onClick={() => handleIssueSelect(issue.value)}\n                className={`px-4 py-2 rounded-md w-full text-center ${\n                  selectedIssue === issue.value\n                    ? \"bg-orange-500 text-white\"\n                    : \"bg-gray-800 text-gray-300\"\n                }`}\n              >\n                {issue.name}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"mb-4\">\n          <h3 className=\"text-md mb-2\">详细描述问题（必填）</h3>\n          <textarea\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            className=\"w-full bg-gray-800 text-white p-3 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500\"\n            placeholder=\"请描述遇到的问题，我们会帮您解决\"\n            rows={4}\n          />\n        </div>\n\n        <button\n          onClick={handleSubmitFeedback}\n          className=\"w-full bg-orange-500 text-white py-2 rounded-md hover:bg-orange-600 focus:outline-none\"\n          disabled={isLoading}\n        >\n          {isLoading ? \"提交中...\" : \"提 交\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default FeedbackComponent;\n"],"names":["_ref","src","alt","width","height","className","props","imgRef","useRef","loaded","setLoaded","useState","useEffect","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","current","onload","style","opacity","disconnect","rootMargin","threshold","observe","unobserve","_jsx","children","ref","cardSkeleton","videoUrl","onBack","movieDetail","selectedEpisode","resumeTime","handleVideoError","autoPlayNextEpisode","playerRef","videoElementRef","videoRatio","setVideoRatio","refetch","useGetRecordQuery","isControlsVisible","setIsControlsVisible","reHeight","setReHeight","isLandscape","setIsLandscape","getToken","_parsedLoggedIn$data","isLoggedIn","localStorage","getItem","parsedLoggedIn","JSON","parse","data","access_token","reportProgress","async","currentTime","duration","token","axios","post","convertToSecurePayload","movie_id","id","episode_id","movie_from","from_code","Math","floor","current_time","headers","Authorization","error","hls","art","Artplayer","container","url","autoplay","playbackRate","setting","autoOrientation","airplay","controls","position","html","tooltip","click","window","webkit","messageHandlers","jsBridge","postMessage","eventName","fullscreen","includes","Hls","loadSource","attachMedia","video","on","ERROR","_","fatal","type","NETWORK_ERROR","startLoad","addEventListener","e","once","videoWidth","videoHeight","sendNativeEvent","reconnectTime","document","querySelector","display","flexDirection","setTimeout","state","initializePlayer","handleOrientationChange","innerWidth","innerHeight","destroy","pause","handleVisibilityChange","hidden","removeEventListener","message","interval","setInterval","clearInterval","_jsxs","_Fragment","onClick","xmlns","viewBox","fill","d","episode_name","handlePiP","pictureInPictureEnabled","pictureInPictureElement","requestPictureInPicture","exitPictureInPicture","paddingTop","top","left","transform","onClose","source","episodes","onEpisodeSelect","changeSource","playFrom","defaultEpisodeId","selectedSource","setSelectedSource","activeTab","setActiveTab","selectedEpisodeId","setSelectedEpisodeId","episodeRange","setEpisodeRange","filteredEpisodes","setFilteredEpisodes","lowerDivHeight","setLowerDivHeight","episodeContainerRef","sourceContainerRef","selectedEpisodeRef","selectedSourceRef","length","selectedIndex","findIndex","ep","rangeStart","rangeEnd","min","_selectedEpisodeRef$c","scrollIntoView","behavior","block","inline","updateHeight","customHeight","upperDiv","getElementById","upperDivHeight","offsetHeight","modalRef","handleClickOutside","event","contains","target","FontAwesomeIcon","icon","faTimes","Array","from","ceil","index","start","end","handleTabClick","slice","map","episode","handleEpisodeClick","substring","name","total","tips","cx","cy","r","_movieDetail$play_fro","_movieDetail$play_fro2","setIsModalOpen","isModalOpen","setSource","openModal","faChevronRight","play_from","background","ModalComponent","closeModal","setOpenPopup","setOpenReportPopup","currentSelected","dispatch","useDispatch","copyToClipboard","textArea","createElement","value","content","body","appendChild","select","execCommand","showToast","err","removeChild","reportCause","setReportCause","key","item","htmlFor","SelectedIcon","DefaultIcon","reportSubmit","movieId","setCommentCount","commentCount","comments","setComments","hasMore","setHasMore","newComment","setNewComment","replyingTo","setReplyingTo","loading","setLoading","page","setPage","commentInputRef","setIsLoggedLogIn","openPopup","openReportPopup","setCurrentSelected","isLoading","setIsLoading","userData","useGetUserQuery","undefined","showDeleteConfirmation","setShowDeleteConfirmation","deleteParams","setDeleteParams","numberOfRow","setNumberOfRow","user","loginResponse","loginInfo","fetchLoginInfo","fetchComments","response","fetchCommentData","decryptWithAes","updatedComments","list","handleDelete","isReply","focus","overflow","InfiniteScroll","dataLength","next","handleLoad","prev","loader","Loader","comment","_comment$user","_comment$user2","_comment$user3","_comment$user4","_comment$user5","_Date","_Date$toISOString","_comment$replies","_comment$replies2","_comment$replies3","status","disabled","setAuthModel","authorization","token_type","fetch","method","stringify","comment_id","commentId","ok","prevComments","likes","likeComment","faThumbsUp","avatar","ProfileImg","nickname","level","marginLeft","marginTop","Date","create_time","toISOString","split","user_id","OptionIcon","replies","reply","_reply$user","_reply$user2","_reply$user3","_reply$user4","_reply$user5","_Date2","_Date2$toISOString","newComments","c","loadReplies","fillOpacity","NoData","onChange","onKeyDown","shiftKey","newNumberOfRows","match","preventDefault","placeholder","rows","json","faSpinner","Popup","ReportPopup","handleCancel","handleConfirm","is_reply","filter","deleteCommentOrReply","_Array$of","_movieDetail$members","_movieDetail$members$","_movieDetail$members2","_movieDetail$members3","_movieDetail$members4","adsData","showModal","setShowModal","isStarred","setIsStarred","is_collect","useGetListQuery","type_id","showFeedbackModal","setShowFeedbackModal","visible","setVisible","handleFeedbackModel","tab","handleStarToggle","alert","sendEventToNative","text","copy","sendShareEventToNative","lowerDivHeightRef","useCallback","newHeight","ticking","handleResize","requestAnimationFrame","passive","of","popularity_score","rate","year","area","type_name","tags","tag","React","handleDetailClick","CommentComponent","NewAds","section","fromMovie","handleCloseModal","members","find","member","actor","FeedbackComponent","onActionComplete","boxShadow","cookieKey","cachedContent","Cookies","get","convertToSecureUrl","result","set","expires","handleShare","backgroundBlendMode","backgroundRepeat","backgroundSize","minWidth","_movie$label","movie","showRecommandMovie","LazyLoadImage","cover","dynamic","label","he","_data$recommendList","recommendList","MovieCard","switchNow","refresh","useNavigate","countdown","setCountdown","timer","clearTimeout","backgroundPosition","Logo","DetailPage","useParams","availableHeight","useDynamicHeight","setAvailableHeight","hasElement","setHasElement","calculateHeight","calculated","max","MutationObserver","mutations","childList","subtree","scrollContainerRef","setMovieDetail","currentEpisode","setCurrentEpisode","currentEpisodeNumber","setCurrentEpisodeNumber","setAdsData","setResumeTime","wholePageError","setWholePageError","errorVideoUrl","setErrorVideoUrl","abortControllerRef","setEpisodes","forwardedCount","setForwardedCount","isPlayerLoading","setIsPlayerLoading","navigate","_data$data","fetchMovieDetail","fetchAdsData","res","getAdsData","arguments","getMovieDetail","setInitialEpisode","mvDetail","playBackInfo","last_playback","_mvDetail$play_from","sourceIndex","x","code","_mvDetail$play_from$s","_mvDetail$play_from$s2","episodeIndex","_mvDetail$play_from$s3","_mvDetail$play_from$s4","mvData","ready_to_play","_parseData$data","parseData","parsePlaybackUrl","play_url","parseUrl","_mvDetail$play_from$","_mvDetail$play_from2","_mvDetail$play_from2$","_mvDetail$play_from2$2","_parseData$data2","handleEpisodeSelect","abort","navigateBackFunction","_episode$episode_id","_movieDetail$last_pla","reportPlaybackProgress","toString","scrollTop","sendMovieDetailEventToNative","_currentEpisode$episo","_parseData$data3","nextEpisode","_nextEpisode$episode_","_parseData$data4","mDetail","episodeList","handleChangeSource","nextSource","_res$data2","getEpisodesBySource","_response$data","_res$data3","_res$data4","handleIosEvent","_event$detail","detail","Number","_event$detail2","NetworkError","i","_res$data","autoPlayNextSource","PlayerLoading","VideoPlayer","errorUrl","paddingBottom","borderBottom","minHeight","DetailSection","SourceSelector","EpisodeSelector","RecommendedList","selectedIssue","setSelectedIssue","description","setDescription","issue","handleIssueSelect","extra"],"sourceRoot":""}