{"version":3,"file":"static/js/514.762043a3.chunk.js","mappings":"mOAWA,MAiJA,EAjJeA,KACb,MAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OAEVC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,KAC1BC,EAAQC,IAAaF,EAAAA,EAAAA,WAAS,IAC9BG,GAAc,UAAEC,EAAS,QAAEC,EAAO,UAAEC,KACzCC,EAAAA,EAAAA,OACKC,IAAeC,EAAAA,EAAAA,OA6DtBC,EAAAA,EAAAA,YAAU,KAENR,IADEJ,EAIJ,GACC,CAACA,IAMJ,OACEa,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,cACfH,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACED,EAAAA,EAAAA,MAAA,OAAKG,UAAU,6EAA4EF,SAAA,EACzFC,EAAAA,EAAAA,KAAA,OAAKE,QAASA,IAAInB,GAAU,GAAIkB,UAAU,cAAaF,UACrDC,EAAAA,EAAAA,KAAA,OACEG,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OAAMR,UAEXC,EAAAA,EAAAA,KAAA,QACEQ,EAAE,iGACFD,KAAK,eAIXP,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sBAAqBF,SAAC,WACrCC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8BAAmC,QAGpDH,EAAAA,EAAAA,MAAA,OAAKG,UAAU,yBAAwBF,SAAA,EACrCD,EAAAA,EAAAA,MAAA,QAAMW,SA/FOC,UACnBC,EAAEC,iBAEF,UACQtB,EAAa,CAAEuB,YAAa5B,IAAQ6B,SAC1C,MAAMC,QAAcpB,IAAcmB,SAElC,GAAIC,SAAAA,EAAOC,KAAM,CACf,MAAM,GACJC,EAAE,SACFC,EAAQ,SACRC,EAAQ,OACRC,EAAM,MACNC,EAAK,SACLC,EAAQ,MACRC,EAAK,MACLC,EAAK,OACLpC,EAAM,gBACNqC,EAAe,WACfC,EAAU,YACVb,EAAW,gBACXc,GACEZ,EAAMC,KAEVnC,GACE+C,EAAAA,EAAAA,IAAQ,CACNX,KACAC,WACAC,WACAC,SACAC,QACAC,WACAG,kBACAF,QACAC,QACApC,SACAsC,aACAb,cACAc,oBAGN,CACA9C,GACEgD,EAAAA,EAAAA,IAAU,CACRC,QAAS,WACTC,KAAM,aAGVhD,EAAS,WACX,CAAE,MAAOiD,GAAQ,IAADC,EACdpD,GACEgD,EAAAA,EAAAA,IAAU,CACRC,SAAUE,SAAmB,QAAdC,EAALD,EAAehB,YAAI,IAAAiB,OAAd,EAANA,EAAsBC,MAAO,SACtCH,KAAM,UAGZ,GAuCoC9B,UAAU,SAAQF,SAAA,EAC9CC,EAAAA,EAAAA,KAAA,SACE+B,KAAK,OACL9B,UAAU,YACVkC,YAAY,SACZC,MAAOnD,EACPoD,SAAW1B,GAAMzB,EAAQyB,EAAE2B,OAAOF,OAClCG,SAAUhD,KAEZS,EAAAA,EAAAA,KAAA,UACEC,UAAW,aACXuC,MAAO,CACLC,WAAYrD,EAAS,UAAY,4BACjCsD,MAAOtD,EAAS,QAAU,6BAC1BW,SACH,WAIHC,EAAAA,EAAAA,KAAA,UAAQC,UAAU,kBAAkBC,QA/CvByC,KACnBzD,EAAQ,GAAG,EA8CqDa,UACxDC,EAAAA,EAAAA,KAAA,OACEG,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OAAMR,UAEXC,EAAAA,EAAAA,KAAA,QACEQ,EAAE,0IACFD,KAAK,QACL,eAAa,oBAMnB,C","sources":["pages/profile/Invite.tsx"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\nimport \"./profile.css\";\nimport { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport {\n  useCreateInviteMutation,\n  useLazyGetUserQuery,\n} from \"../profile/services/profileApi\"; // import the hook\nimport { showToast } from \"./error/ErrorSlice\";\nimport { setUser } from \"./components/slice/UserSlice\";\n\nconst Invite = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const [text, setText] = useState(\"\");\n  const [active, setActive] = useState(false);\n  const [createInvite, { isLoading, isError, isSuccess }] =\n    useCreateInviteMutation(); // use the mutation hook\n  const [triggerUser] = useLazyGetUserQuery();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    try {\n      await createInvite({ invite_code: text }).unwrap();\n      const users = await triggerUser().unwrap();\n\n      if (users?.data) {\n        const {\n          id,\n          username,\n          nickname,\n          avatar,\n          level,\n          integral,\n          email,\n          phone,\n          active,\n          social_accounts,\n          inviter_id,\n          invite_code,\n          invite_user_num,\n        } = users.data;\n\n        dispatch(\n          setUser({\n            id,\n            username,\n            nickname,\n            avatar,\n            level,\n            integral,\n            social_accounts,\n            email,\n            phone,\n            active,\n            inviter_id,\n            invite_code,\n            invite_user_num,\n          })\n        );\n      }\n      dispatch(\n        showToast({\n          message: \"Invited!\",\n          type: \"success\",\n        })\n      );\n      navigate(\"/profile\");\n    } catch (error) {\n      dispatch(\n        showToast({\n          message: (error as any)?.data?.msg || \"修改昵称失败\",\n          type: \"error\",\n        })\n      );\n    }\n  };\n\n  useEffect(() => {\n    if (text) {\n      setActive(true);\n    } else {\n      setActive(false);\n    }\n  }, [text]);\n\n  const handleRemove = () => {\n    setText(\"\");\n  };\n\n  return (\n    <div>\n      <div className=\"fixed-bg\"></div>\n      <div>\n        <div className=\"flex fixed top-0 w-full z-10 bg-[#161619] justify-between items-center p-2\">\n          <div onClick={()=>navigate(-1)} className=\"back-button\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"24\"\n              height=\"24\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n            > \n              <path\n                d=\"M7.828 11H20V13H7.828L13.192 18.364L11.778 19.778L4 12L11.778 4.22198L13.192 5.63598L7.828 11Z\"\n                fill=\"white\"\n              />\n            </svg>\n          </div>\n          <div className=\"history-title pr-10\">填写邀请码</div>\n          <div className=\"edit-title cursor-pointer\"></div>{\" \"}\n          {/* Trigger form submit */}\n        </div>\n        <div className=\"mt-[80px] p-4 relative\">\n          <form onSubmit={handleSubmit} className=\"w-full\">\n            <input\n              type=\"text\"\n              className=\"new-input\"\n              placeholder=\"请输入邀请码\"\n              value={text}\n              onChange={(e) => setText(e.target.value)}\n              disabled={isLoading} // Disable input during submission\n            />\n            <button\n              className={`submit_btn`}\n              style={{\n                background: active ? \"#F54100\" : \"rgba(255, 255, 255, 0.04)\",\n                color: active ? \"white\" : \"rgba(255, 255, 255, 0.20)\",\n              }}\n            >\n              保存\n            </button>\n          </form>\n          <button className=\"close-btn-input\" onClick={handleRemove}>\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"10\"\n              height=\"10\"\n              viewBox=\"0 0 10 10\"\n              fill=\"none\"\n            >\n              <path\n                d=\"M5 3.88906L8.88906 0L10 1.11094L6.11094 5L10 8.88906L8.88906 10L5 6.11094L1.11094 10L0 8.88906L3.88906 5L0 1.11094L1.11094 0L5 3.88906Z\"\n                fill=\"white\"\n                fill-opacity=\"0.8\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Invite;\n"],"names":["Invite","dispatch","useDispatch","navigate","useNavigate","text","setText","useState","active","setActive","createInvite","isLoading","isError","isSuccess","useCreateInviteMutation","triggerUser","useLazyGetUserQuery","useEffect","_jsxs","children","_jsx","className","onClick","xmlns","width","height","viewBox","fill","d","onSubmit","async","e","preventDefault","invite_code","unwrap","users","data","id","username","nickname","avatar","level","integral","email","phone","social_accounts","inviter_id","invite_user_num","setUser","showToast","message","type","error","_data","msg","placeholder","value","onChange","target","disabled","style","background","color","handleRemove"],"sourceRoot":""}